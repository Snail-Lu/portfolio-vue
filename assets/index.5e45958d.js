import{_ as Te}from"./index.7f2a43d2.js";/* empty css                       */import{o as Ae,m as _e,I as qe,k as vt,b as Je,aj as Ye,ah as Qe,a as Pt,w as tr,D as se,F as ae,z as W,J as Ot,O as er,u as le,L as rr,M as nr}from"./elementPlus.2d35d10b.js";import{_ as or}from"./logo.d56b2740.js";function Ut(r){return r===""?r:r==="true"||r=="1"}function ir(r,t){return new Promise((e,n)=>{var o=new XMLHttpRequest;o.responseType="blob",o.onload=function(){var i=new FileReader;i.onloadend=function(){e(i.result)},i.readAsArrayBuffer(o.response)},o.open("GET",r),o.send()})}function nt(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function ce(r,t){for(var e="",n=0,o=-1,i=0,s,a=0;a<=r.length;++a){if(a<r.length)s=r.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(o===a-1||i===1))if(o!==a-1&&i===2){if(e.length<2||n!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",n=0):(e=e.slice(0,l),n=e.length-1-e.lastIndexOf("/")),o=a,i=0;continue}}else if(e.length===2||e.length===1){e="",n=0,o=a,i=0;continue}}t&&(e.length>0?e+="/..":e="..",n=2)}else e.length>0?e+="/"+r.slice(o+1,a):e=r.slice(o+1,a),n=a-o-1;o=a,i=0}else s===46&&i!==-1?++i:i=-1}return e}function sr(r,t){var e=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+n:e+r+n:n}var pt={resolve:function(){for(var t="",e=!1,n,o=arguments.length-1;o>=-1&&!e;o--){var i;o>=0?i=arguments[o]:(n===void 0&&(n=process.cwd()),i=n),nt(i),i.length!==0&&(t=i+"/"+t,e=i.charCodeAt(0)===47)}return t=ce(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(nt(t),t.length===0)return".";var e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=ce(t,!e),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return nt(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];nt(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":pt.normalize(t)},relative:function(t,e){if(nt(t),nt(e),t===e||(t=pt.resolve(t),e=pt.resolve(e),t===e))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var o=t.length,i=o-n,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var a=e.length,l=a-s,u=i<l?i:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(e.charCodeAt(s+h)===47)return e.slice(s+h+1);if(h===0)return e.slice(s+h)}else i>u&&(t.charCodeAt(n+h)===47?c=h:h===0&&(c=0));break}var v=t.charCodeAt(n+h),E=e.charCodeAt(s+h);if(v!==E)break;v===47&&(c=h)}var A="";for(h=n+c+1;h<=o;++h)(h===o||t.charCodeAt(h)===47)&&(A.length===0?A+="..":A+="/..");return A.length>0?A+e.slice(s+c):(s+=c,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(nt(t),t.length===0)return".";for(var e=t.charCodeAt(0),n=e===47,o=-1,i=!0,s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),e===47){if(!i){o=s;break}}else i=!1;return o===-1?n?"/":".":n&&o===1?"//":t.slice(0,o)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');nt(t);var n=0,o=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){var u=t.charCodeAt(s);if(u===47){if(!i){n=s+1;break}}else l===-1&&(i=!1,l=s+1),a>=0&&(u===e.charCodeAt(a)?--a===-1&&(o=s):(a=-1,o=l))}return n===o?o=l:o===-1&&(o=t.length),t.slice(n,o)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else o===-1&&(i=!1,o=s+1);return o===-1?"":t.slice(n,o)}},extname:function(t){nt(t);for(var e=-1,n=0,o=-1,i=!0,s=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(l===47){if(!i){n=a+1;break}continue}o===-1&&(i=!1,o=a+1),l===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||o===-1||s===0||s===1&&e===o-1&&e===n+1?"":t.slice(e,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return sr("/",t)},parse:function(t){nt(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var n=t.charCodeAt(0),o=n===47,i;o?(e.root="/",i=1):i=0;for(var s=-1,a=0,l=-1,u=!0,c=t.length-1,h=0;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!u){a=c+1;break}continue}l===-1&&(u=!1,l=c+1),n===46?s===-1?s=c:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||l===-1||h===0||h===1&&s===l-1&&s===a+1?l!==-1&&(a===0&&o?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(a,l)):(a===0&&o?(e.name=t.slice(1,s),e.base=t.slice(1,l)):(e.name=t.slice(a,s),e.base=t.slice(a,l)),e.ext=t.slice(s,l)),a>0?e.dir=t.slice(0,a-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};pt.posix=pt;const ar=pt.extname,ke=pt.basename;class lr{constructor(){let t=(()=>typeof global>"u")(),e="image/png",n="image/jpeg",o="image/jpeg",i="image/webp",s="application/pdf",a="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:e,jpg:n,jpeg:o,webp:i}:{png:e,jpg:n,jpeg:o,pdf:s,svg:a},mimes:t?{[e]:"png",[n]:"jpg",[i]:"webp"}:{[e]:"png",[n]:"jpg",[s]:"pdf",[a]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function cr(r,{filename:t="",extension:e="",format:k,page:o,quality:i,matte:s,density:a,outline:l,archive:E}={}){var{fromMime:c,toMime:h,expected:v}=new lr,E=E||"canvas",A=k||e.replace(/@\d+x$/i,"")||ar(t),k=c(h(A)||A),x=h(k),g=r.length;if(!A)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!k)throw new Error(`Unsupported file format "${A}" (expected ${v})`);if(!g)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let p,S,d=t.replace(/{(\d*)}/g,(m,w)=>(S=!0,w=parseInt(w,10),p=isFinite(w)?w:isFinite(p)?p:-1,"{}")),y=o>0?o-1:o<0?g+o:void 0;if(isFinite(y)&&y<0||y>=g)throw new RangeError(g==1?`Canvas only has a \u2018page 1\u2019 (${y} is out of bounds)`:`Canvas has pages 1\u2013${g} (${y} is out of bounds)`);if(r=isFinite(y)?[r[y]]:S||k=="pdf"?r:r.slice(-1),i===void 0)i=.92;else if(typeof i!="number"||!isFinite(i)||i<0||i>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(a===void 0){let m=(e||ke(t,A)).match(/@(\d+)x$/i);a=m?parseInt(m[1],10):1}else if(typeof a!="number"||!Number.isInteger(a)||a<1)throw new TypeError("The density option must be a non-negative integer");return l===void 0?l=!0:k=="svg"&&(l=!!l),{filename:t,pattern:d,format:k,mime:x,pages:r,padding:p,quality:i,matte:s,density:a,outline:l,archive:E}}class Bt{static for(t){return new Bt().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var e=this.crc|0,n=this.table,o=0,i=t.length|0;o<i;o++)e=e>>>8^n[(e^t[o])&255];return this.crc=e,this}}Bt.prototype.table=(()=>{var r,t,e,n=[];for(r=0;r<256;r++){for(e=r,t=0;t<8;t++)e=e&1?e>>>1^3988292384:e>>>1;n[r]=e}return n})();function Ht(r){let t=new Uint8Array(r),e=new DataView(t.buffer),n={array:t,view:e,size:r,set8(o,i){return e.setUint8(o,i),n},set16(o,i){return e.setUint16(o,i,!0),n},set32(o,i){return e.setUint32(o,i,!0),n},bytes(o,i){return t.set(i,o),n}};return n}class It{constructor(t){let e=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2,date:(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}),this.add(t)}async add(t,e){let n=!e,o=It.encoder.encode(`${this.directory}/${n?"":t}`),i=new Uint8Array(n?0:await e.arrayBuffer()),s=30+o.length,a=s+i.length,l=16,{offset:u}=this,c=Ht(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,Bt.for(i)).set32(14,i.length).set32(18,i.length).set16(22,o.length);u+=s;let h=Ht(s+i.length+l).set32(0,67324752).bytes(4,c.array).bytes(30,o).bytes(s,i);u+=i.length,h.set32(a,134695760).bytes(a+4,c.array.slice(10,22)),u+=l,this.files.push({offset:u,folder:n,name:o,header:c,payload:h}),this.offset=u}toBuffer(){let t=this.files.reduce((h,{name:v})=>46+v.length+h,0),e=Ht(t+22),n=0;for(var{offset:o,name:i,header:s,folder:a}of this.files)e.set32(n,33639248).set16(n+4,20).bytes(n+6,s.array).set8(n+38,a?16:0).set32(n+42,o).bytes(n+46,i),n+=46+i.length;e.set32(n,101010256).set16(n+8,this.files.length).set16(n+10,this.files.length).set32(n+12,t).set32(n+16,this.offset);let l=new Uint8Array(this.offset+e.size),u=0;for(var{payload:c}of this.files)l.set(c.array,u),u+=c.size;return l.set(e.array,u),l}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}It.encoder=new TextEncoder;const Xt=(r,t,e,n)=>{if(n){let{width:o,height:i}=r,s=Object.assign(document.createElement("canvas"),{width:o,height:i}),a=s.getContext("2d");a.fillStyle=n,a.fillRect(0,0,o,i),a.drawImage(r,0,0),r=s}return new Promise((o,i)=>r.toBlob(o,t,e))},ur=(...r)=>Xt(...r).then(t=>t.arrayBuffer()),fr=async(r,t,e,n,o)=>{De(o,await Xt(r,t,e,n))},hr=async(r,t,e,n,o,i,s)=>{let a=c=>i.replace("{}",String(c+1).padStart(s,"0")),l=ke(o,".zip")||"archive",u=new It(l);await Promise.all(r.map(async(c,h)=>{let v=a(h);await u.add(v,await Xt(c,t,e,n))})),De(`${l}.zip`,u.blob)},De=(r,t)=>{const e=window.URL.createObjectURL(t),n=document.createElement("a");n.style.display="none",n.href=e,n.setAttribute("download",r),typeof n.download>"u"&&n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n),setTimeout(()=>window.URL.revokeObjectURL(e),100)},dr=(r,t,e)=>r.map(n=>{if(t==1&&!e)return n.canvas;let o=document.createElement("canvas"),i=o.getContext("2d"),s=n.canvas?n.canvas:n;return o.width=s.width*t,o.height=s.height*t,e&&(i.fillStyle=e,i.fillRect(0,0,o.width,o.height)),i.scale(t,t),i.drawImage(s,0,0),o}),gr={asBuffer:ur,asDownload:fr,asZipDownload:hr,atScale:dr,options:cr},{asBuffer:Nt,asDownload:pr,asZipDownload:mr,atScale:jt,options:zt}=gr,ue=Symbol.for("toDataURL"),vr=r=>new Promise((t,e)=>Object.assign(new Be,{crossOrigin:"Anonymous",onload:t,onerror:e,src:r}));class wr{constructor(t,e){let n=document.createElement("canvas"),o=[];Object.defineProperty(n,"async",{value:!0,writable:!1,enumerable:!0});for(var[i,s]of Object.entries({png:()=>Nt(n,"image/png"),jpg:()=>Nt(n,"image/jpeg"),pages:()=>o.concat(n).map(a=>a.getContext("2d"))}))Object.defineProperty(n,i,{get:s});return Object.assign(n,{width:t,height:e,newPage(...a){var{width:u,height:c}=n,l=Object.assign(document.createElement("canvas"),{width:u,height:c});l.getContext("2d").drawImage(n,0,0),o.push(l);var[u,c]=a.length?a:[u,c];return Object.assign(n,{width:u,height:c}).getContext("2d")},saveAs(a,l){l=typeof l=="number"?{quality:l}:l;let u=zt(this.pages,{filename:a,...l}),{pattern:c,padding:h,mime:v,quality:E,matte:A,density:k,archive:x}=u,g=jt(u.pages,k);return h==null?pr(g[0],v,E,A,a):mr(g,v,E,A,x,c,h)},toBuffer(a="png",l={}){l=typeof l=="number"?{quality:l}:l;let u=zt(this.pages,{extension:a,...l}),{mime:c,quality:h,matte:v,pages:E,density:A}=u,k=jt(E,A,v)[0];return Nt(k,c,h,v)},[ue]:n.toDataURL.bind(n),toDataURL(a="png",l={}){l=typeof l=="number"?{quality:l}:l;let u=zt(this.pages,{extension:a,...l}),{mime:c,quality:h,matte:v,pages:E,density:A}=u,k=jt(E,A,v)[0],x=k[k===n?ue:"toDataURL"](c,h);return Promise.resolve(x)}})}}const{CanvasRenderingContext2D:br,CanvasGradient:yr,CanvasPattern:xr,Image:Be,ImageData:Cr,Path2D:Sr,DOMMatrix:Pr,DOMRect:Er,DOMPoint:Tr}=window,Ar={Canvas:wr,loadImage:vr,CanvasRenderingContext2D:br,CanvasGradient:yr,CanvasPattern:xr,Image:Be,ImageData:Cr,Path2D:Sr,DOMMatrix:Pr,DOMRect:Er,DOMPoint:Tr},Ct=(r,t,e={},n=e)=>{if(Array.isArray(t))t.forEach(o=>Ct(r,o,e,n));else if(typeof t=="function")t(r,e,n,Ct);else{const o=Object.keys(t)[0];Array.isArray(t[o])?(n[o]={},Ct(r,t[o],e,n[o])):n[o]=t[o](r,e,n,Ct)}return e},mt=(r,t)=>(e,n,o,i)=>{t(e,n,o)&&i(e,r,n,o)},_r=(r,t)=>(e,n,o,i)=>{const s=[];let a=e.pos;for(;t(e,n,o);){const l={};if(i(e,r,n,l),e.pos===a)break;a=e.pos,s.push(l)}return s},kr=r=>({data:r,pos:0}),Q=()=>r=>r.data[r.pos++],Ie=(r=0)=>t=>t.data[t.pos+r],it=r=>t=>t.data.subarray(t.pos,t.pos+=r),Lt=r=>t=>t.data.subarray(t.pos,t.pos+r),Vt=r=>t=>Array.from(it(r)(t)).map(e=>String.fromCharCode(e)).join(""),gt=r=>t=>{const e=it(2)(t);return r?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]},Le=(r,t)=>(e,n,o)=>{const i=typeof t=="function"?t(e,n,o):t,s=it(r),a=new Array(i);for(var l=0;l<i;l++)a[l]=s(e);return a},Dr=(r,t,e)=>{for(var n=0,o=0;o<e;o++)n+=r[t+o]&&2**(e-o-1);return n},Zt=r=>t=>{const e=Q()(t),n=new Array(8);for(var o=0;o<8;o++)n[7-o]=!!(e&1<<o);return Object.keys(r).reduce((i,s)=>{const a=r[s];return a.length?i[s]=Dr(n,a.index,a.length):i[s]=n[a.index],i},{})};var Rt={blocks:r=>{const e=[],n=r.data.length;for(var o=0,i=Q()(r);i!==0&&i;i=Q()(r)){if(r.pos+i>=n){const u=n-r.pos;e.push(it(u)(r)),o+=u;break}e.push(it(i)(r)),o+=i}const s=new Uint8Array(o);for(var a=0,l=0;l<e.length;l++)s.set(e[l],a),a+=e[l].length;return s}};const Br=mt({gce:[{codes:it(2)},{byteSize:Q()},{extras:Zt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:gt(!0)},{transparentColorIndex:Q()},{terminator:Q()}]},r=>{var t=Lt(2)(r);return t[0]===33&&t[1]===249}),Ir=mt({image:[{code:Q()},{descriptor:[{left:gt(!0)},{top:gt(!0)},{width:gt(!0)},{height:gt(!0)},{lct:Zt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},mt({lct:Le(3,(r,t,e)=>Math.pow(2,e.descriptor.lct.size+1))},(r,t,e)=>e.descriptor.lct.exists),{data:[{minCodeSize:Q()},Rt]}]},r=>Ie()(r)===44),Lr=mt({text:[{codes:it(2)},{blockSize:Q()},{preData:(r,t,e)=>it(e.text.blockSize)(r)},Rt]},r=>{var t=Lt(2)(r);return t[0]===33&&t[1]===1}),Rr=mt({application:[{codes:it(2)},{blockSize:Q()},{id:(r,t,e)=>Vt(e.blockSize)(r)},Rt]},r=>{var t=Lt(2)(r);return t[0]===33&&t[1]===255}),Mr=mt({comment:[{codes:it(2)},Rt]},r=>{var t=Lt(2)(r);return t[0]===33&&t[1]===254}),Fr=[{header:[{signature:Vt(3)},{version:Vt(3)}]},{lsd:[{width:gt(!0)},{height:gt(!0)},{gct:Zt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:Q()},{pixelAspectRatio:Q()}]},mt({gct:Le(3,(r,t)=>Math.pow(2,t.lsd.gct.size+1))},(r,t)=>t.lsd.gct.exists),{frames:_r([Br,Rr,Mr,Ir,Lr],r=>{var t=Ie()(r);return t===33||t===44})}],$r=(r,t)=>{const e=new Array(r.length),n=r.length/t,o=function(c,h){const v=r.slice(h*t,(h+1)*t);e.splice.apply(e,[c*t,t].concat(v))},i=[0,4,2,1],s=[8,8,4,2];for(var a=0,l=0;l<4;l++)for(var u=i[l];u<n;u+=s[l])o(u,a),a++;return e},Or=(r,t,e)=>{const i=e;var s,a,l,u,c,h,v,y,E,A,d,k,m,w,D,P;const x=new Array(e),g=new Array(4096),p=new Array(4096),S=new Array(4096+1);for(k=r,a=1<<k,c=a+1,s=a+2,v=-1,u=k+1,l=(1<<u)-1,E=0;E<a;E++)g[E]=0,p[E]=E;var d,y,m,w,P,D;for(d=y=m=w=P=D=0,A=0;A<i;){if(w===0){if(y<u){d+=t[D]<<y,y+=8,D++;continue}if(E=d&l,d>>=u,y-=u,E>s||E==c)break;if(E==a){u=k+1,l=(1<<u)-1,s=a+2,v=-1;continue}if(v==-1){S[w++]=p[E],v=E,m=E;continue}for(h=E,E==s&&(S[w++]=m,E=v);E>a;)S[w++]=p[E],E=g[E];m=p[E]&255,S[w++]=m,s<4096&&(g[s]=v,p[s]=m,s++,(s&l)===0&&s<4096&&(u++,l+=s)),v=h}w--,x[P++]=S[w],A++}for(A=P;A<i;A++)x[A]=0;return x},Ur=r=>{const t=new Uint8Array(r);return Ct(kr(t),Fr)},Hr=r=>{const t=r.pixels.length,e=new Uint8ClampedArray(t*4);for(var n=0;n<t;n++){const o=n*4,i=r.pixels[n],s=r.colorTable[i];e[o]=s[0],e[o+1]=s[1],e[o+2]=s[2],e[o+3]=i!==r.transparentIndex?255:0}return e},Nr=(r,t,e)=>{if(!r.image){console.warn("gif frame does not have associated image.");return}const{image:n}=r,o=n.descriptor.width*n.descriptor.height;var i=Or(n.data.minCodeSize,n.data.blocks,o);n.descriptor.lct.interlaced&&(i=$r(i,n.descriptor.width));const s={pixels:i,dims:{top:r.image.descriptor.top,left:r.image.descriptor.left,width:r.image.descriptor.width,height:r.image.descriptor.height}};return n.descriptor.lct&&n.descriptor.lct.exists?s.colorTable=n.lct:s.colorTable=t,r.gce&&(s.delay=(r.gce.delay||10)*10,s.disposalType=r.gce.extras.disposal,r.gce.extras.transparentColorGiven&&(s.transparentIndex=r.gce.transparentColorIndex)),e&&(s.patch=Hr(s)),s},jr=(r,t)=>r.frames.filter(e=>e.image).map(e=>Nr(e,r.gct,t));function zr(r,t,e){const n=Re(t),o=r-1;let i=0;switch(e){case X.L:i=ot[o][0];break;case X.M:i=ot[o][1];break;case X.Q:i=ot[o][2];break;case X.H:i=ot[o][3];break}return n<=i}function Gr(r,t){for(var e=1,n=Re(r),o=0,i=ot.length;o<i;o++){var s=0;switch(t){case X.L:s=ot[o][0];break;case X.M:s=ot[o][1];break;case X.Q:s=ot[o][2];break;case X.H:s=ot[o][3];break}if(n<=s)break;e++}if(e>ot.length)throw new Error("Too long data");return e}function Re(r){var t=encodeURI(r).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(r)?3:0)}class Vr{constructor(t){this.mode=J.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const e=[];for(let n=0,o=this.data.length;n<o;n++){const i=[],s=this.data.charCodeAt(n);s>65536?(i[0]=240|(s&1835008)>>>18,i[1]=128|(s&258048)>>>12,i[2]=128|(s&4032)>>>6,i[3]=128|s&63):s>2048?(i[0]=224|(s&61440)>>>12,i[1]=128|(s&4032)>>>6,i[2]=128|s&63):s>128?(i[0]=192|(s&1984)>>>6,i[1]=128|s&63):i[0]=s,e.push(i)}this.parsedData=Array.prototype.concat.apply([],e),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let e=0,n=this.parsedData.length;e<n;e++)t.put(this.parsedData[e],8)}}class ft{constructor(t=-1,e=X.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=Gr(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!zr(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const e=new Vr(t);this.dataList.push(e),this.dataCache=void 0}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(let o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=ft.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(let o=-1;o<=7;o++)e+o<=-1||this.moduleCount<=e+o||(0<=n&&n<=6&&(o==0||o==6)||0<=o&&o<=6&&(n==0||n==6)||2<=n&&n<=4&&2<=o&&o<=4?this.modules[t+n][e+o]=!0:this.modules[t+n][e+o]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(at).includes(this.maskPattern))return this.maskPattern;let t=0,e=0;for(let n=0;n<8;n++){this.makeImpl(!0,n);const o=M.getLostPoint(this);(n==0||t>o)&&(t=o,e=n)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=M.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let n=0;n<t.length;n++){const o=t[e],i=t[n];if(this.modules[o][i]==null)for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s==-2||s==2||a==-2||a==2||s==0&&a==0?this.modules[o+s][i+a]=!0:this.modules[o+s][i+a]=!1}}setupTypeNumber(t){const e=M.getBCHTypeNumber(this.typeNumber);for(var n=0;n<18;n++){var o=!t&&(e>>n&1)==1;this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(var n=0;n<18;n++){var o=!t&&(e>>n&1)==1;this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=o}}setupTypeInfo(t,e){const n=this.errorCorrectLevel<<3|e,o=M.getBCHTypeInfo(n);for(var i=0;i<15;i++){var s=!t&&(o>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!t&&(o>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let n=-1,o=this.moduleCount-1,i=7,s=0;for(let a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(let l=0;l<2;l++)if(this.modules[o][a-l]==null){let u=!1;s<t.length&&(u=(t[s]>>>i&1)==1),M.getMask(e,o,a-l)&&(u=!u),this.modules[o][a-l]=u,i--,i==-1&&(s++,i=7)}if(o+=n,o<0||this.moduleCount<=o){o-=n,n=-n;break}}}static createData(t,e,n){const o=lt.getRSBlocks(t,e),i=new Wr;for(var s=0;s<n.length;s++){const l=n[s];i.put(l.mode,4),i.put(l.getLength(),M.getLengthInBits(l.mode,t)),l.write(i)}let a=0;for(var s=0;s<o.length;s++)a+=o[s].dataCount;if(i.getLengthInBits()>a*8)throw new Error(`code length overflow. (${i.getLengthInBits()}>${a*8})`);for(i.getLengthInBits()+4<=a*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=a*8||(i.put(ft.PAD0,8),i.getLengthInBits()>=a*8));)i.put(ft.PAD1,8);return ft.createBytes(i,o)}static createBytes(t,e){let n=0,o=0,i=0;const s=new Array(e.length),a=new Array(e.length);for(var l=0;l<e.length;l++){const E=e[l].dataCount,A=e[l].totalCount-E;o=Math.max(o,E),i=Math.max(i,A),s[l]=new Array(E);for(var u=0;u<s[l].length;u++)s[l][u]=255&t.buffer[u+n];n+=E;const k=M.getErrorCorrectPolynomial(A),g=new bt(s[l],k.getLength()-1).mod(k);a[l]=new Array(k.getLength()-1);for(var u=0;u<a[l].length;u++){const S=u+g.getLength()-a[l].length;a[l][u]=S>=0?g.get(S):0}}let c=0;for(var u=0;u<e.length;u++)c+=e[u].totalCount;const h=new Array(c);let v=0;for(var u=0;u<o;u++)for(var l=0;l<e.length;l++)u<s[l].length&&(h[v++]=s[l][u]);for(var u=0;u<i;u++)for(var l=0;l<e.length;l++)u<a[l].length&&(h[v++]=a[l][u]);return h}}ft.PAD0=236;ft.PAD1=17;const X={L:1,M:0,Q:3,H:2},J={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},at={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class M{static getBCHTypeInfo(t){let e=t<<10;for(;M.getBCHDigit(e)-M.getBCHDigit(M.G15)>=0;)e^=M.G15<<M.getBCHDigit(e)-M.getBCHDigit(M.G15);return(t<<10|e)^M.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;M.getBCHDigit(e)-M.getBCHDigit(M.G18)>=0;)e^=M.G18<<M.getBCHDigit(e)-M.getBCHDigit(M.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;t!=0;)e++,t>>>=1;return e}static getPatternPosition(t){return M.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,n){switch(t){case at.PATTERN000:return(e+n)%2==0;case at.PATTERN001:return e%2==0;case at.PATTERN010:return n%3==0;case at.PATTERN011:return(e+n)%3==0;case at.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case at.PATTERN101:return e*n%2+e*n%3==0;case at.PATTERN110:return(e*n%2+e*n%3)%2==0;case at.PATTERN111:return(e*n%3+(e+n)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let e=new bt([1],0);for(let n=0;n<t;n++)e=e.multiply(new bt([1,j.gexp(n)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case J.MODE_NUMBER:return 10;case J.MODE_ALPHA_NUM:return 9;case J.MODE_8BIT_BYTE:return 8;case J.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(e<27)switch(t){case J.MODE_NUMBER:return 12;case J.MODE_ALPHA_NUM:return 11;case J.MODE_8BIT_BYTE:return 16;case J.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else if(e<41)switch(t){case J.MODE_NUMBER:return 14;case J.MODE_ALPHA_NUM:return 13;case J.MODE_8BIT_BYTE:return 16;case J.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}else throw new Error(`type:${e}`)}static getLostPoint(t){const e=t.getModuleCount();let n=0;for(var o=0;o<e;o++)for(var i=0;i<e;i++){let l=0;const u=t.isDark(o,i);for(let c=-1;c<=1;c++)if(!(o+c<0||e<=o+c))for(let h=-1;h<=1;h++)i+h<0||e<=i+h||c==0&&h==0||u==t.isDark(o+c,i+h)&&l++;l>5&&(n+=3+l-5)}for(var o=0;o<e-1;o++)for(var i=0;i<e-1;i++){let c=0;t.isDark(o,i)&&c++,t.isDark(o+1,i)&&c++,t.isDark(o,i+1)&&c++,t.isDark(o+1,i+1)&&c++,(c==0||c==4)&&(n+=3)}for(var o=0;o<e;o++)for(var i=0;i<e-6;i++)t.isDark(o,i)&&!t.isDark(o,i+1)&&t.isDark(o,i+2)&&t.isDark(o,i+3)&&t.isDark(o,i+4)&&!t.isDark(o,i+5)&&t.isDark(o,i+6)&&(n+=40);for(var i=0;i<e;i++)for(var o=0;o<e-6;o++)t.isDark(o,i)&&!t.isDark(o+1,i)&&t.isDark(o+2,i)&&t.isDark(o+3,i)&&t.isDark(o+4,i)&&!t.isDark(o+5,i)&&t.isDark(o+6,i)&&(n+=40);let s=0;for(var i=0;i<e;i++)for(var o=0;o<e;o++)t.isDark(o,i)&&s++;const a=Math.abs(100*s/e/e-50)/5;return n+=a*10,n}}M.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];M.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;M.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;M.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class j{static glog(t){if(t<1)throw new Error(`glog(${t})`);return j.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return j.EXP_TABLE[t]}}j.EXP_TABLE=new Array(256);j.LOG_TABLE=new Array(256);j._constructor=function(){for(var r=0;r<8;r++)j.EXP_TABLE[r]=1<<r;for(var r=8;r<256;r++)j.EXP_TABLE[r]=j.EXP_TABLE[r-4]^j.EXP_TABLE[r-5]^j.EXP_TABLE[r-6]^j.EXP_TABLE[r-8];for(var r=0;r<255;r++)j.LOG_TABLE[j.EXP_TABLE[r]]=r}();class bt{constructor(t,e){if(t.length==null)throw new Error(`${t.length}/${e}`);let n=0;for(;n<t.length&&t[n]==0;)n++;this.num=new Array(t.length-n+e);for(let o=0;o<t.length-n;o++)this.num[o]=t[o+n]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const e=new Array(this.getLength()+t.getLength()-1);for(let n=0;n<this.getLength();n++)for(let o=0;o<t.getLength();o++)e[n+o]^=j.gexp(j.glog(this.get(n))+j.glog(t.get(o)));return new bt(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const e=j.glog(this.get(0))-j.glog(t.get(0)),n=new Array(this.getLength());for(var o=0;o<this.getLength();o++)n[o]=this.get(o);for(var o=0;o<t.getLength();o++)n[o]^=j.gexp(j.glog(t.get(o))+e);return new bt(n,0).mod(t)}}class lt{constructor(t,e){this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){const n=lt.getRsBlockTable(t,e);if(n==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);const o=n.length/3,i=[];for(let s=0;s<o;s++){const a=n[s*3+0],l=n[s*3+1],u=n[s*3+2];for(let c=0;c<a;c++)i.push(new lt(l,u))}return i}static getRsBlockTable(t,e){switch(e){case X.L:return lt.RS_BLOCK_TABLE[(t-1)*4+0];case X.M:return lt.RS_BLOCK_TABLE[(t-1)*4+1];case X.Q:return lt.RS_BLOCK_TABLE[(t-1)*4+2];case X.H:return lt.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}lt.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class Wr{constructor(){this.buffer=[],this.length=0}get(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1}put(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}const ot=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var Kr=100,V=256,fe=V-1,ut=4,Me=16,qt=1<<Me,Fe=10,Jt=10,Xr=qt>>Jt,Zr=qt<<Fe-Jt,qr=V>>3,Wt=6,Jr=1<<Wt,Yr=qr*Jr,Qr=30,$e=10,Et=1<<$e,Oe=8,he=1<<Oe,tn=$e+Oe,wt=1<<tn,de=499,ge=491,pe=487,Ue=503,en=3*Ue;function rn(r,t){var e,n,o,i,s;function a(){e=[],n=new Int32Array(256),o=new Int32Array(V),i=new Int32Array(V),s=new Int32Array(V>>3);var g,p;for(g=0;g<V;g++)p=(g<<ut+8)/V,e[g]=new Float64Array([p,p,p,0]),i[g]=qt/V,o[g]=0}function l(){for(var g=0;g<V;g++)e[g][0]>>=ut,e[g][1]>>=ut,e[g][2]>>=ut,e[g][3]=g}function u(g,p,S,d,y){e[p][0]-=g*(e[p][0]-S)/Et,e[p][1]-=g*(e[p][1]-d)/Et,e[p][2]-=g*(e[p][2]-y)/Et}function c(g,p,S,d,y){for(var m=Math.abs(p-g),w=Math.min(p+g,V),P=p+1,D=p-1,B=1,f,F;P<w||D>m;)F=s[B++],P<w&&(f=e[P++],f[0]-=F*(f[0]-S)/wt,f[1]-=F*(f[1]-d)/wt,f[2]-=F*(f[2]-y)/wt),D>m&&(f=e[D--],f[0]-=F*(f[0]-S)/wt,f[1]-=F*(f[1]-d)/wt,f[2]-=F*(f[2]-y)/wt)}function h(g,p,S){var d=2147483647,y=d,m=-1,w=m,P,D,B,f,F;for(P=0;P<V;P++)D=e[P],B=Math.abs(D[0]-g)+Math.abs(D[1]-p)+Math.abs(D[2]-S),B<d&&(d=B,m=P),f=B-(o[P]>>Me-ut),f<y&&(y=f,w=P),F=i[P]>>Jt,i[P]-=F,o[P]+=F<<Fe;return i[m]+=Xr,o[m]-=Zr,w}function v(){var g,p,S,d,y,m,w=0,P=0;for(g=0;g<V;g++){for(S=e[g],y=g,m=S[1],p=g+1;p<V;p++)d=e[p],d[1]<m&&(y=p,m=d[1]);if(d=e[y],g!=y&&(p=d[0],d[0]=S[0],S[0]=p,p=d[1],d[1]=S[1],S[1]=p,p=d[2],d[2]=S[2],S[2]=p,p=d[3],d[3]=S[3],S[3]=p),m!=w){for(n[w]=P+g>>1,p=w+1;p<m;p++)n[p]=g;w=m,P=g}}for(n[w]=P+fe>>1,p=w+1;p<256;p++)n[p]=fe}function E(g,p,S){for(var d,y,m,w=1e3,P=-1,D=n[p],B=D-1;D<V||B>=0;)D<V&&(y=e[D],m=y[1]-p,m>=w?D=V:(D++,m<0&&(m=-m),d=y[0]-g,d<0&&(d=-d),m+=d,m<w&&(d=y[2]-S,d<0&&(d=-d),m+=d,m<w&&(w=m,P=y[3])))),B>=0&&(y=e[B],m=p-y[1],m>=w?B=-1:(B--,m<0&&(m=-m),d=y[0]-g,d<0&&(d=-d),m+=d,m<w&&(d=y[2]-S,d<0&&(d=-d),m+=d,m<w&&(w=m,P=y[3]))));return P}function A(){var g,p=r.length,S=30+(t-1)/3,d=p/(3*t),y=~~(d/Kr),m=Et,w=Yr,P=w>>Wt;for(P<=1&&(P=0),g=0;g<P;g++)s[g]=m*((P*P-g*g)*he/(P*P));var D;p<en?(t=1,D=3):p%de!==0?D=3*de:p%ge!==0?D=3*ge:p%pe!==0?D=3*pe:D=3*Ue;var B,f,F,C,$=0;for(g=0;g<d;)if(B=(r[$]&255)<<ut,f=(r[$+1]&255)<<ut,F=(r[$+2]&255)<<ut,C=h(B,f,F),u(m,C,B,f,F),P!==0&&c(P,C,B,f,F),$+=D,$>=p&&($-=p),g++,y===0&&(y=1),g%y===0)for(m-=m/S,w-=w/Qr,P=w>>Wt,P<=1&&(P=0),C=0;C<P;C++)s[C]=m*((P*P-C*C)*he/(P*P))}function k(){a(),A(),l(),v()}this.buildColormap=k;function x(){for(var g=[],p=[],S=0;S<V;S++)p[e[S][3]]=S;for(var d=0,y=0;y<V;y++){var m=p[y];g[d++]=e[m][0],g[d++]=e[m][1],g[d++]=e[m][2]}return g}this.getColormap=x,this.lookupRGB=E}var me=-1,Tt=12,xt=5003,nn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function on(r,t,e,n){var o=Math.max(2,n),i=new Uint8Array(256),s=new Int32Array(xt),a=new Int32Array(xt),l,u=0,c,h=0,v,E=!1,A,k,x,g,p,S;function d(C,$){i[c++]=C,c>=254&&D($)}function y(C){m(xt),h=k+2,E=!0,F(k,C)}function m(C){for(var $=0;$<C;++$)s[$]=-1}function w(C,$){var b,dt,N,tt,ct,z,et;for(A=C,E=!1,S=A,v=B(S),k=1<<C-1,x=k+1,h=k+2,c=0,tt=f(),et=0,b=xt;b<65536;b*=2)++et;et=8-et,z=xt,m(z),F(k,$);t:for(;(dt=f())!=me;){if(b=(dt<<Tt)+tt,N=dt<<et^tt,s[N]===b){tt=a[N];continue}else if(s[N]>=0){ct=z-N,N===0&&(ct=1);do if((N-=ct)<0&&(N+=z),s[N]===b){tt=a[N];continue t}while(s[N]>=0)}F(tt,$),tt=dt,h<1<<Tt?(a[N]=h++,s[N]=b):y($)}F(tt,$),F(x,$)}function P(C){C.writeByte(o),g=r*t,p=0,w(o+1,C),C.writeByte(0)}function D(C){c>0&&(C.writeByte(c),C.writeBytes(i,0,c),c=0)}function B(C){return(1<<C)-1}function f(){if(g===0)return me;--g;var C=e[p++];return C&255}function F(C,$){for(l&=nn[u],u>0?l|=C<<u:l=C,u+=S;u>=8;)d(l&255,$),l>>=8,u-=8;if((h>v||E)&&(E?(v=B(S=A),E=!1):(++S,S==Tt?v=1<<Tt:v=B(S))),C==x){for(;u>0;)d(l&255,$),l>>=8,u-=8;D($)}}this.encode=P}function Z(){this.page=-1,this.pages=[],this.newPage()}Z.pageSize=4096;Z.charMap={};for(var At=0;At<256;At++)Z.charMap[At]=String.fromCharCode(At);Z.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(Z.pageSize),this.cursor=0};Z.prototype.getData=function(){for(var r="",t=0;t<this.pages.length;t++)for(var e=0;e<Z.pageSize;e++)r+=Z.charMap[this.pages[t][e]];return r};Z.prototype.toFlattenUint8Array=function(){const r=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const n=Uint8Array.from(this.pages[t].slice(0,this.cursor));r.push(n)}else r.push(this.pages[t]);const e=new Uint8Array(r.reduce((n,o)=>n+o.length,0));return r.reduce((n,o)=>(e.set(o,n),n+o.length),0),e};Z.prototype.writeByte=function(r){this.cursor>=Z.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=r};Z.prototype.writeUTFBytes=function(r){for(var t=r.length,e=0;e<t;e++)this.writeByte(r.charCodeAt(e))};Z.prototype.writeBytes=function(r,t,e){for(var n=e||r.length,o=t||0;o<n;o++)this.writeByte(r[o])};function O(r,t){this.width=~~r,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new Z}O.prototype.setDelay=function(r){this.delay=Math.round(r/10)};O.prototype.setFrameRate=function(r){this.delay=Math.round(100/r)};O.prototype.setDispose=function(r){r>=0&&(this.dispose=r)};O.prototype.setRepeat=function(r){this.repeat=r};O.prototype.setTransparent=function(r){this.transparent=r};O.prototype.addFrame=function(r){this.image=r,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};O.prototype.finish=function(){this.out.writeByte(59)};O.prototype.setQuality=function(r){r<1&&(r=1),this.sample=r};O.prototype.setDither=function(r){r===!0&&(r="FloydSteinberg"),this.dither=r};O.prototype.setGlobalPalette=function(r){this.globalPalette=r};O.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};O.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};O.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new rn(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};O.prototype.indexPixels=function(r){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,n=0;n<t;n++){var o=this.findClosestRGB(this.pixels[e++]&255,this.pixels[e++]&255,this.pixels[e++]&255);this.usedEntry[o]=!0,this.indexedPixels[n]=o}};O.prototype.ditherPixels=function(r,t){var e={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!r||!e[r])throw"Unknown dithering kernel: "+r;var n=e[r],o=0,i=this.height,s=this.width,a=this.pixels,l=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var u=0;u<i;u++){t&&(l=l*-1);for(var c=l==1?0:s-1,h=l==1?s:0;c!==h;c+=l){o=u*s+c;var v=o*3,E=a[v],A=a[v+1],k=a[v+2];v=this.findClosestRGB(E,A,k),this.usedEntry[v]=!0,this.indexedPixels[o]=v,v*=3;for(var x=this.colorTab[v],g=this.colorTab[v+1],p=this.colorTab[v+2],S=E-x,d=A-g,y=k-p,m=l==1?0:n.length-1,w=l==1?n.length:0;m!==w;m+=l){var P=n[m][1],D=n[m][2];if(P+c>=0&&P+c<s&&D+u>=0&&D+u<i){var B=n[m][0];v=o+P+D*s,v*=3,a[v]=Math.max(0,Math.min(255,a[v]+S*B)),a[v+1]=Math.max(0,Math.min(255,a[v+1]+d*B)),a[v+2]=Math.max(0,Math.min(255,a[v+2]+y*B))}}}}};O.prototype.findClosest=function(r,t){return this.findClosestRGB((r&16711680)>>16,(r&65280)>>8,r&255,t)};O.prototype.findClosestRGB=function(r,t,e,n){if(this.colorTab===null)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(r,t,e);for(var o=0,i=256*256*256,s=this.colorTab.length,a=0,l=0;a<s;l++){var u=r-(this.colorTab[a++]&255),c=t-(this.colorTab[a++]&255),h=e-(this.colorTab[a++]&255),v=u*u+c*c+h*h;(!n||this.usedEntry[l])&&v<i&&(i=v,o=l)}return o};O.prototype.getImagePixels=function(){var r=this.width,t=this.height;this.pixels=new Uint8Array(r*t*3);for(var e=this.image,n=0,o=0,i=0;i<t;i++)for(var s=0;s<r;s++)this.pixels[o++]=e[n++],this.pixels[o++]=e[n++],this.pixels[o++]=e[n++],n++};O.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var r,t;this.transparent===null?(r=0,t=0):(r=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|r),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};O.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};O.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};O.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};O.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var r=3*256-this.colorTab.length,t=0;t<r;t++)this.out.writeByte(0)};O.prototype.writeShort=function(r){this.out.writeByte(r&255),this.out.writeByte(r>>8&255)};O.prototype.writePixels=function(){var r=new on(this.width,this.height,this.indexedPixels,this.colorDepth);r.encode(this.out)};O.prototype.stream=function(){return this.out};var sn=globalThis&&globalThis.__awaiter||function(r,t,e,n){function o(i){return i instanceof e?i:new e(function(s){s(i)})}return new(e||(e=Promise))(function(i,s){function a(c){try{u(n.next(c))}catch(h){s(h)}}function l(c){try{u(n.throw(c))}catch(h){s(h)}}function u(c){c.done?i(c.value):o(c.value).then(a,l)}u((n=n.apply(r,t||[])).next())})};const{Canvas:st}=Ar,_t=.4;function ve(r){if(!r)return;function t(e){e.onload=null,e.onerror=null}return new Promise(function(e,n){if(r.slice(0,4)=="data"){let i=new Image;i.onload=function(){e(i),t(i)},i.onerror=function(){n("Image load error"),t(i)},i.src=r;return}let o=new Image;o.setAttribute("crossOrigin","Anonymous"),o.onload=function(){e(o)},o.onerror=function(){n("Image load error")},o.src=r})}class R{constructor(t){const e=Object.assign({},t);if(Object.keys(R.defaultOptions).forEach(n=>{n in e||Object.defineProperty(e,n,{value:R.defaultOptions[n],enumerable:!0,writable:!0})}),e.components?typeof e.components=="object"&&Object.keys(R.defaultComponentOptions).forEach(n=>{n in e.components?Object.defineProperty(e.components,n,{value:Object.assign(Object.assign({},R.defaultComponentOptions[n]),e.components[n]),enumerable:!0,writable:!0}):Object.defineProperty(e.components,n,{value:R.defaultComponentOptions[n],enumerable:!0,writable:!0})}):e.components=R.defaultComponentOptions,e.dotScale!==null&&e.dotScale!==void 0){if(e.dotScale<=0||e.dotScale>1)throw new Error("dotScale should be in range (0, 1].");e.components.data.scale=e.dotScale,e.components.timing.scale=e.dotScale,e.components.alignment.scale=e.dotScale}this.options=e,this.canvas=new st(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new ft(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,e,n,o,i,s){t.beginPath(),t.moveTo(e,n),t.arcTo(e+o,n,e+o,n+i,s),t.arcTo(e+o,n+i,e,n+i,s),t.arcTo(e,n+i,e,n,s),t.arcTo(e,n,e+o,n,s),t.closePath()}static _getAverageRGB(t){const n={r:0,g:0,b:0};let o,i,s=-4;const a={r:0,g:0,b:0};let l=0;i=t.naturalHeight||t.height,o=t.naturalWidth||t.width;const c=new st(o,i).getContext("2d");if(!c)return n;c.drawImage(t,0,0);let h;try{h=c.getImageData(0,0,o,i)}catch{return n}for(;(s+=5*4)<h.data.length;)h.data[s]>200||h.data[s+1]>200||h.data[s+2]>200||(++l,a.r+=h.data[s],a.g+=h.data[s+1],a.b+=h.data[s+2]);return a.r=~~(a.r/l),a.g=~~(a.g/l),a.b=~~(a.b/l),a}static _drawDot(t,e,n,o,i=0,s=1){t.fillRect((e+i)*o,(n+i)*o,s*o,s*o)}static _drawAlignProtector(t,e,n,o){t.clearRect((e-2)*o,(n-2)*o,5*o,5*o),t.fillRect((e-2)*o,(n-2)*o,5*o,5*o)}static _drawAlign(t,e,n,o,i=0,s=1,a,l){const u=t.fillStyle;t.fillStyle=a,new Array(4).fill(0).map((c,h)=>{R._drawDot(t,e-2+h,n-2,o,i,s),R._drawDot(t,e+2,n-2+h,o,i,s),R._drawDot(t,e+2-h,n+2,o,i,s),R._drawDot(t,e-2,n+2-h,o,i,s)}),R._drawDot(t,e,n,o,i,s),l||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((c,h)=>{R._drawDot(t,e-1+h,n-1,o,i,s),R._drawDot(t,e+1,n-1+h,o,i,s),R._drawDot(t,e+1-h,n+1,o,i,s),R._drawDot(t,e-1,n+1-h,o,i,s)})),t.fillStyle=u}_draw(){var t,e,n,o,i,s,a,l,u,c,h,v,E,A,k,x,g,p,S;return sn(this,void 0,void 0,function*(){const d=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,y=this.options.size;let m=this.options.margin;(m<0||m*2>=y)&&(m=0);const w=Math.ceil(m),P=y-2*m,D=this.options.whiteMargin,B=this.options.backgroundDimming,f=Math.ceil(P/d),F=f*d,C=F+2*w,$=new st(C,C),b=$.getContext("2d");this._clear(),b.save(),b.translate(w,w);const dt=new st(C,C),N=dt.getContext("2d");let tt=null,ct=[];if(this.options.gifBackground){const T=Ur(this.options.gifBackground);if(tt=T,ct=jr(T,!0),this.options.autoColor){let _=0,I=0,L=0,G=0;for(let U=0;U<ct[0].colorTable.length;U++){const H=ct[0].colorTable[U];H[0]>200||H[1]>200||H[2]>200||H[0]===0&&H[1]===0&&H[2]===0||(G++,_+=H[0],I+=H[1],L+=H[2])}_=~~(_/G),I=~~(I/G),L=~~(L/G),this.options.colorDark=`rgb(${_},${I},${L})`}}else if(this.options.backgroundImage){const T=yield ve(this.options.backgroundImage);if(this.options.autoColor){const _=R._getAverageRGB(T);this.options.colorDark=`rgb(${_.r},${_.g},${_.b})`}N.drawImage(T,0,0,T.width,T.height,0,0,C,C),N.rect(0,0,C,C),N.fillStyle=B,N.fill()}else N.rect(0,0,C,C),N.fillStyle=this.options.colorLight,N.fill();const z=M.getPatternPosition(this.qrCode.typeNumber),et=((n=(e=this.options.components)===null||e===void 0?void 0:e.data)===null||n===void 0?void 0:n.scale)||_t,ee=(1-et)*.5;for(let T=0;T<d;T++)for(let _=0;_<d;_++){const I=this.qrCode.isDark(T,_),L=_<8&&(T<8||T>=d-8)||_>=d-8&&T<8,G=T==6&&_>=8&&_<=d-8||_==6&&T>=8&&T<=d-8;let U=L||G;for(let K=1;K<z.length-1;K++)U=U||T>=z[K]-2&&T<=z[K]+2&&_>=z[K]-2&&_<=z[K]+2;const H=_*f+(U?0:ee*f),rt=T*f+(U?0:ee*f);if(b.strokeStyle=I?this.options.colorDark:this.options.colorLight,b.lineWidth=.5,b.fillStyle=I?this.options.colorDark:this.options.colorLight,z.length===0)U||b.fillRect(H,rt,(U?1:et)*f,(U?1:et)*f);else{const K=_<d-4&&_>=d-4-5&&T<d-4&&T>=d-4-5;!U&&!K&&b.fillRect(H,rt,(U?1:et)*f,(U?1:et)*f)}}const Y=z[z.length-1],Ke=this.options.colorLight;if(b.fillStyle=Ke,b.fillRect(0,0,8*f,8*f),b.fillRect(0,(d-8)*f,8*f,8*f),b.fillRect((d-8)*f,0,8*f,8*f),!((i=(o=this.options.components)===null||o===void 0?void 0:o.timing)===null||i===void 0)&&i.protectors&&(b.fillRect(8*f,6*f,(d-8-8)*f,f),b.fillRect(6*f,8*f,f,(d-8-8)*f)),!((a=(s=this.options.components)===null||s===void 0?void 0:s.cornerAlignment)===null||a===void 0)&&a.protectors&&R._drawAlignProtector(b,Y,Y,f),!((u=(l=this.options.components)===null||l===void 0?void 0:l.alignment)===null||u===void 0)&&u.protectors)for(let T=0;T<z.length;T++)for(let _=0;_<z.length;_++){const I=z[_],L=z[T];if(!(I===6&&(L===6||L===Y))){if(L===6&&(I===6||I===Y))continue;if(I===Y&&L===Y)continue;R._drawAlignProtector(b,I,L,f)}}b.fillStyle=this.options.colorDark,b.fillRect(0,0,7*f,f),b.fillRect((d-7)*f,0,7*f,f),b.fillRect(0,6*f,7*f,f),b.fillRect((d-7)*f,6*f,7*f,f),b.fillRect(0,(d-7)*f,7*f,f),b.fillRect(0,(d-7+6)*f,7*f,f),b.fillRect(0,0,f,7*f),b.fillRect(6*f,0,f,7*f),b.fillRect((d-7)*f,0,f,7*f),b.fillRect((d-7+6)*f,0,f,7*f),b.fillRect(0,(d-7)*f,f,7*f),b.fillRect(6*f,(d-7)*f,f,7*f),b.fillRect(2*f,2*f,3*f,3*f),b.fillRect((d-7+2)*f,2*f,3*f,3*f),b.fillRect(2*f,(d-7+2)*f,3*f,3*f);const Ft=((h=(c=this.options.components)===null||c===void 0?void 0:c.timing)===null||h===void 0?void 0:h.scale)||_t,re=(1-Ft)*.5;for(let T=0;T<d-8;T+=2)R._drawDot(b,8+T,6,f,re,Ft),R._drawDot(b,6,8+T,f,re,Ft);const ne=((E=(v=this.options.components)===null||v===void 0?void 0:v.cornerAlignment)===null||E===void 0?void 0:E.scale)||_t,Xe=(1-ne)*.5;R._drawAlign(b,Y,Y,f,Xe,ne,this.options.colorDark,((k=(A=this.options.components)===null||A===void 0?void 0:A.cornerAlignment)===null||k===void 0?void 0:k.protectors)||!1);const oe=((g=(x=this.options.components)===null||x===void 0?void 0:x.alignment)===null||g===void 0?void 0:g.scale)||_t,Ze=(1-oe)*.5;for(let T=0;T<z.length;T++)for(let _=0;_<z.length;_++){const I=z[_],L=z[T];if(!(I===6&&(L===6||L===Y))){if(L===6&&(I===6||I===Y))continue;if(I===Y&&L===Y)continue;R._drawAlign(b,I,L,f,Ze,oe,this.options.colorDark,((S=(p=this.options.components)===null||p===void 0?void 0:p.alignment)===null||S===void 0?void 0:S.protectors)||!1)}}if(D&&(b.fillStyle=this.options.backgroundColor,b.fillRect(-w,-w,C,w),b.fillRect(-w,F,C,w),b.fillRect(F,-w,w,C),b.fillRect(-w,-w,w,C)),this.options.logoImage){const T=yield ve(this.options.logoImage);let _=this.options.logoScale,I=this.options.logoMargin,L=this.options.logoCornerRadius;(_<=0||_>=1)&&(_=.2),I<0&&(I=0),L<0&&(L=0);const G=F*_,U=.5*(C-G),H=U;b.restore(),b.fillStyle=this.options.logoBackgroundColor,b.save(),R._prepareRoundedCornerClip(b,U-I,H-I,G+2*I,G+2*I,L+I),b.clip();const rt=b.globalCompositeOperation;b.globalCompositeOperation="destination-out",b.fill(),b.globalCompositeOperation=rt,b.restore(),b.save(),R._prepareRoundedCornerClip(b,U,H,G,G,L),b.clip(),b.drawImage(T,U,H,G,G),b.restore(),b.save(),b.translate(w,w)}if(tt){let T,_,I,L,G,U;if(ct.forEach(function(H){T||(T=new O(y,y),T.setDelay(H.delay),T.setRepeat(0));const{width:rt,height:K}=H.dims;_||(_=new st(rt,K),I=_.getContext("2d"),I.rect(0,0,_.width,_.height),I.fillStyle="#ffffff",I.fill()),(!L||!U||rt!==L.width||K!==L.height)&&(L=new st(rt,K),G=L.getContext("2d"),U=G.createImageData(rt,K)),U.data.set(H.patch),G.putImageData(U,0,0),I.drawImage(L.getContext("2d").canvas,H.dims.left,H.dims.top);const St=new st(C,C),yt=St.getContext("2d");yt.drawImage(_.getContext("2d").canvas,0,0,C,C),yt.rect(0,0,C,C),yt.fillStyle=B,yt.fill(),yt.drawImage($.getContext("2d").canvas,0,0,C,C);const $t=new st(y,y),ie=$t.getContext("2d");ie.drawImage(St.getContext("2d").canvas,0,0,y,y),T.addFrame(ie.getImageData(0,0,$t.width,$t.height).data)}),!T)throw new Error("No frames.");if(T.finish(),we(this.canvas)){const rt=T.stream().toFlattenUint8Array().reduce((K,St)=>K+String.fromCharCode(St),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(rt)}`)}return Promise.resolve(Buffer.from(T.stream().toFlattenUint8Array()))}else{N.drawImage($.getContext("2d").canvas,0,0,C,C),b.drawImage(dt.getContext("2d").canvas,-w,-w,C,C);const T=new st(y,y);T.getContext("2d").drawImage($.getContext("2d").canvas,0,0,y,y),this.canvas=T;const I=this.options.gifBackground?"gif":"png";return we(this.canvas)?Promise.resolve(this.canvas.toDataURL(I)):Promise.resolve(this.canvas.toBuffer(I))}})}}R.CorrectLevel=X;R.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};R.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:X.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:R.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function we(r){try{return r instanceof HTMLElement}catch{return typeof r=="object"&&r.nodeType===1&&typeof r.style=="object"&&typeof r.ownerDocument=="object"}}const an={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const e=await ir(this.gifBgSrc),n=this.logoSrc;this.render(void 0,n,e);return}const r=this.bgSrc,t=this.logoSrc;this.render(r,t)},async render(r,t,e){const n=this;new R({gifBackground:e,text:n.text,size:n.size,margin:n.margin,colorDark:n.colorDark,colorLight:n.colorLight,backgroundColor:n.backgroundColor,backgroundImage:r,backgroundDimming:n.backgroundDimming,logoImage:t,logoScale:n.logoScale,logoBackgroundColor:n.logoBackgroundColor,correctLevel:n.correctLevel,logoMargin:n.logoMargin,logoCornerRadius:n.logoCornerRadius,whiteMargin:Ut(n.whiteMargin),dotScale:n.dotScale,autoColor:Ut(n.autoColor),binarize:Ut(n.binarize),binarizeThreshold:n.binarizeThreshold,components:n.components}).draw().then(o=>{this.imgUrl=o,n.callback&&n.callback(o,n.qid)})}}},ln=["src"];function cn(r,t,e,n,o,i){return e.bindElement?(Ae(),_e("img",{key:0,style:{display:"inline-block"},src:o.imgUrl},null,8,ln)):qe("",!0)}const un=Te(an,[["render",cn]]);function fn(r,t){if(r.match(/^[a-z]+:\/\//i))return r;if(r.match(/^\/\//))return window.location.protocol+r;if(r.match(/^[a-z]+:/i))return r;const e=document.implementation.createHTMLDocument(),n=e.createElement("base"),o=e.createElement("a");return e.head.appendChild(n),e.body.appendChild(o),t&&(n.href=t),o.href=r,o.href}const hn=(()=>{let r=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(r+=1,`u${t()}${r}`)})();function ht(r){const t=[];for(let e=0,n=r.length;e<n;e++)t.push(r[e]);return t}function kt(r,t){const n=(r.ownerDocument.defaultView||window).getComputedStyle(r).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function dn(r){const t=kt(r,"border-left-width"),e=kt(r,"border-right-width");return r.clientWidth+t+e}function gn(r){const t=kt(r,"border-top-width"),e=kt(r,"border-bottom-width");return r.clientHeight+t+e}function He(r,t={}){const e=t.width||dn(r),n=t.height||gn(r);return{width:e,height:n}}function pn(){let r,t;try{t=process}catch{}const e=t&&t.env?t.env.devicePixelRatio:null;return e&&(r=parseInt(e,10),Number.isNaN(r)&&(r=1)),r||window.devicePixelRatio||1}const q=16384;function mn(r){(r.width>q||r.height>q)&&(r.width>q&&r.height>q?r.width>r.height?(r.height*=q/r.width,r.width=q):(r.width*=q/r.height,r.height=q):r.width>q?(r.height*=q/r.width,r.width=q):(r.width*=q/r.height,r.height=q))}function Dt(r){return new Promise((t,e)=>{const n=new Image;n.decode=()=>t(n),n.onload=()=>t(n),n.onerror=e,n.crossOrigin="anonymous",n.decoding="async",n.src=r})}async function vn(r){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(r)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function wn(r,t,e){const n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg"),i=document.createElementNS(n,"foreignObject");return o.setAttribute("width",`${t}`),o.setAttribute("height",`${e}`),o.setAttribute("viewBox",`0 0 ${t} ${e}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),o.appendChild(i),i.appendChild(r),vn(o)}function bn(r){const t=r.getPropertyValue("content");return`${r.cssText} content: '${t.replace(/'|"/g,"")}';`}function yn(r){return ht(r).map(t=>{const e=r.getPropertyValue(t),n=r.getPropertyPriority(t);return`${t}: ${e}${n?" !important":""};`}).join(" ")}function xn(r,t,e){const n=`.${r}:${t}`,o=e.cssText?bn(e):yn(e);return document.createTextNode(`${n}{${o}}`)}function be(r,t,e){const n=window.getComputedStyle(r,e),o=n.getPropertyValue("content");if(o===""||o==="none")return;const i=hn();try{t.className=`${t.className} ${i}`}catch{return}const s=document.createElement("style");s.appendChild(xn(i,e,n)),t.appendChild(s)}function Cn(r,t){be(r,t,":before"),be(r,t,":after")}const ye="application/font-woff",xe="image/jpeg",Sn={woff:ye,woff2:ye,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:xe,jpeg:xe,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Pn(r){const t=/\.([^./]*?)$/g.exec(r);return t?t[1]:""}function Yt(r){const t=Pn(r).toLowerCase();return Sn[t]||""}function En(r){return r.split(/,/)[1]}function Kt(r){return r.search(/^(data:)/)!==-1}function Ne(r,t){return`data:${t};base64,${r}`}async function je(r,t,e){const n=await fetch(r,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const o=await n.blob();return new Promise((i,s)=>{const a=new FileReader;a.onerror=s,a.onloadend=()=>{try{i(e({res:n,result:a.result}))}catch(l){s(l)}},a.readAsDataURL(o)})}const Gt={};function Tn(r,t,e){let n=r.replace(/\?.*/,"");return e&&(n=r),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function Qt(r,t,e){const n=Tn(r,t,e.includeQueryParams);if(Gt[n]!=null)return Gt[n];e.cacheBust&&(r+=(/\?/.test(r)?"&":"?")+new Date().getTime());let o;try{const i=await je(r,e.fetchRequestInit,({res:s,result:a})=>(t||(t=s.headers.get("Content-Type")||""),En(a)));o=Ne(i,t)}catch(i){o=e.imagePlaceholder||"";let s=`Failed to fetch resource: ${r}`;i&&(s=typeof i=="string"?i:i.message),s&&console.warn(s)}return Gt[n]=o,o}async function An(r){const t=r.toDataURL();return t==="data:,"?r.cloneNode(!1):Dt(t)}async function _n(r,t){if(r.currentSrc){const i=document.createElement("canvas"),s=i.getContext("2d");i.width=r.clientWidth,i.height=r.clientHeight,s==null||s.drawImage(r,0,0,i.width,i.height);const a=i.toDataURL();return Dt(a)}const e=r.poster,n=Yt(e),o=await Qt(e,n,t);return Dt(o)}async function kn(r){var t;try{if(!((t=r==null?void 0:r.contentDocument)===null||t===void 0)&&t.body)return await Mt(r.contentDocument.body,{},!0)}catch{}return r.cloneNode(!1)}async function Dn(r,t){return r instanceof HTMLCanvasElement?An(r):r instanceof HTMLVideoElement?_n(r,t):r instanceof HTMLIFrameElement?kn(r):r.cloneNode(!1)}const Bn=r=>r.tagName!=null&&r.tagName.toUpperCase()==="SLOT";async function In(r,t,e){var n;const o=Bn(r)&&r.assignedNodes?ht(r.assignedNodes()):ht(((n=r.shadowRoot)!==null&&n!==void 0?n:r).childNodes);return o.length===0||r instanceof HTMLVideoElement||await o.reduce((i,s)=>i.then(()=>Mt(s,e)).then(a=>{a&&t.appendChild(a)}),Promise.resolve()),t}function Ln(r,t){const e=t.style;if(!e)return;const n=window.getComputedStyle(r);n.cssText?(e.cssText=n.cssText,e.transformOrigin=n.transformOrigin):ht(n).forEach(o=>{let i=n.getPropertyValue(o);o==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),e.setProperty(o,i,n.getPropertyPriority(o))})}function Rn(r,t){r instanceof HTMLTextAreaElement&&(t.innerHTML=r.value),r instanceof HTMLInputElement&&t.setAttribute("value",r.value)}function Mn(r,t){if(r instanceof HTMLSelectElement){const e=t,n=Array.from(e.children).find(o=>r.value===o.getAttribute("value"));n&&n.setAttribute("selected","")}}function Fn(r,t){return t instanceof Element&&(Ln(r,t),Cn(r,t),Rn(r,t),Mn(r,t)),t}async function $n(r,t){const e=r.querySelectorAll?r.querySelectorAll("use"):[];if(e.length===0)return r;const n={};for(let i=0;i<e.length;i++){const a=e[i].getAttribute("xlink:href");if(a){const l=r.querySelector(a),u=document.querySelector(a);!l&&u&&!n[a]&&(n[a]=await Mt(u,t,!0))}}const o=Object.values(n);if(o.length){const i="http://www.w3.org/1999/xhtml",s=document.createElementNS(i,"svg");s.setAttribute("xmlns",i),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";const a=document.createElementNS(i,"defs");s.appendChild(a);for(let l=0;l<o.length;l++)a.appendChild(o[l]);r.appendChild(s)}return r}async function Mt(r,t,e){return!e&&t.filter&&!t.filter(r)?null:Promise.resolve(r).then(n=>Dn(n,t)).then(n=>In(r,n,t)).then(n=>Fn(r,n)).then(n=>$n(n,t))}const ze=/url\((['"]?)([^'"]+?)\1\)/g,On=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Un=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Hn(r){const t=r.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Nn(r){const t=[];return r.replace(ze,(e,n,o)=>(t.push(o),e)),t.filter(e=>!Kt(e))}async function jn(r,t,e,n,o){try{const i=e?fn(t,e):t,s=Yt(t);let a;if(o){const l=await o(i);a=Ne(l,s)}else a=await Qt(i,s,n);return r.replace(Hn(t),`$1${a}$3`)}catch{}return r}function zn(r,{preferredFontFormat:t}){return t?r.replace(Un,e=>{for(;;){const[n,,o]=On.exec(e)||[];if(!o)return"";if(o===t)return`src: ${n};`}}):r}function Ge(r){return r.search(ze)!==-1}async function Ve(r,t,e){if(!Ge(r))return r;const n=zn(r,e);return Nn(n).reduce((i,s)=>i.then(a=>jn(a,s,t,e)),Promise.resolve(n))}async function Gn(r,t){var e;const n=(e=r.style)===null||e===void 0?void 0:e.getPropertyValue("background");if(n){const o=await Ve(n,null,t);r.style.setProperty("background",o,r.style.getPropertyPriority("background"))}}async function Vn(r,t){if(!(r instanceof HTMLImageElement&&!Kt(r.src))&&!(r instanceof SVGImageElement&&!Kt(r.href.baseVal)))return;const e=r instanceof HTMLImageElement?r.src:r.href.baseVal,n=await Qt(e,Yt(e),t);await new Promise((o,i)=>{r.onload=o,r.onerror=i;const s=r;s.decode&&(s.decode=o),r instanceof HTMLImageElement?(r.srcset="",r.src=n):r.href.baseVal=n})}async function Wn(r,t){const n=ht(r.childNodes).map(o=>We(o,t));await Promise.all(n).then(()=>r)}async function We(r,t){r instanceof Element&&(await Gn(r,t),await Vn(r,t),await Wn(r,t))}function Kn(r,t){const{style:e}=r;t.backgroundColor&&(e.backgroundColor=t.backgroundColor),t.width&&(e.width=`${t.width}px`),t.height&&(e.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(o=>{e[o]=n[o]}),r}const Ce={};async function Se(r){let t=Ce[r];if(t!=null)return t;const n=await(await fetch(r)).text();return t={url:r,cssText:n},Ce[r]=t,t}async function Pe(r,t){let e=r.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,i=(e.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(n,"$1");return a.startsWith("https://")||(a=new URL(a,r.url).href),je(a,t.fetchRequestInit,({result:l})=>(e=e.replace(s,`url(${l})`),[s,l]))});return Promise.all(i).then(()=>e)}function Ee(r){if(r==null)return[];const t=[],e=/(\/\*[\s\S]*?\*\/)/gi;let n=r.replace(e,"");const o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=o.exec(n);if(l===null)break;t.push(l[0])}n=n.replace(o,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");for(;;){let l=i.exec(n);if(l===null){if(l=a.exec(n),l===null)break;i.lastIndex=a.lastIndex}else a.lastIndex=i.lastIndex;t.push(l[0])}return t}async function Xn(r,t){const e=[],n=[];return r.forEach(o=>{if("cssRules"in o)try{ht(o.cssRules||[]).forEach((i,s)=>{if(i.type===CSSRule.IMPORT_RULE){let a=s+1;const l=i.href,u=Se(l).then(c=>Pe(c,t)).then(c=>Ee(c).forEach(h=>{try{o.insertRule(h,h.startsWith("@import")?a+=1:o.cssRules.length)}catch(v){console.error("Error inserting rule from remote css",{rule:h,error:v})}})).catch(c=>{console.error("Error loading remote css",c.toString())});n.push(u)}})}catch(i){const s=r.find(a=>a.href==null)||document.styleSheets[0];o.href!=null&&n.push(Se(o.href).then(a=>Pe(a,t)).then(a=>Ee(a).forEach(l=>{s.insertRule(l,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a.toString())})),console.error("Error inlining remote css file",i.toString())}}),Promise.all(n).then(()=>(r.forEach(o=>{if("cssRules"in o)try{ht(o.cssRules||[]).forEach(i=>{e.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${o.href}`,i.toString())}}),e))}function Zn(r){return r.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Ge(t.style.getPropertyValue("src")))}async function qn(r,t){if(r.ownerDocument==null)throw new Error("Provided element is not within a Document");const e=ht(r.ownerDocument.styleSheets),n=await Xn(e,t);return Zn(n)}async function Jn(r,t){const e=await qn(r,t);return(await Promise.all(e.map(o=>{const i=o.parentStyleSheet?o.parentStyleSheet.href:null;return Ve(o.cssText,i,t)}))).join(`
`)}async function Yn(r,t){const e=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Jn(r,t);if(e){const n=document.createElement("style"),o=document.createTextNode(e);n.appendChild(o),r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n)}}async function Qn(r,t={}){const{width:e,height:n}=He(r,t),o=await Mt(r,t,!0);return await Yn(o,t),await We(o,t),Kn(o,t),await wn(o,e,n)}async function to(r,t={}){const{width:e,height:n}=He(r,t),o=await Qn(r,t),i=await Dt(o),s=document.createElement("canvas"),a=s.getContext("2d"),l=t.pixelRatio||pn(),u=t.canvasWidth||e,c=t.canvasHeight||n;return s.width=u*l,s.height=c*l,t.skipAutoScale||mn(s),s.style.width=`${u}`,s.style.height=`${c}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(i,0,0,s.width,s.height),s}async function eo(r,t={}){return(await to(r,t)).toDataURL()}const te=r=>(rr("data-v-ebe71345"),r=r(),nr(),r),ro={class:"poster-container"},no={class:"demo-box"},oo=te(()=>W("div",{class:"share-info"},[W("div",{class:"logo-wrapper"},[W("img",{src:or,alt:"",class:"logo"})]),W("div",null,"\u5BFC\u8D2D9527")],-1)),io=["src"],so={class:"goods-info"},ao={class:"title"},lo={class:"price"},co={class:"new"},uo=te(()=>W("span",null,"\xA5",-1)),fo={class:"old"},ho={class:"poster-info"},go=te(()=>W("div",{class:"tips"},"\u626B\u7801\u7ACB\u5373\u8D2D\u4E70",-1)),po={class:"demo-box"},mo=["width","height"],vo={__name:"index",setup(r){const t={url:"https://snaillu.gitee.io/portfolio/demo/poster",goodsName:"\u897F\u670D\u5957\u88C5\u7537\u897F\u88C5\u6574\u5957\u4FEE\u8EAB\u5546\u52A1\u6B63\u88C5 \u9ED1\u8272",goodsImg:"https://m.360buyimg.com/mobilecms/s1265x1265_jfs/t1/20988/35/20240/36277/637e5127Ee10e66b3/03b212c37d98de5f.jpg",goodsCode:"123456",goodsPrice:5431,goodsSalePrice:1233},e=vt("HTML"),n=vt(null),o=vt(""),i=()=>{eo(n.value).then(x=>{o.value=x})},s=vt(""),a=(x,g)=>{s.value=x},l=vt(!0);Je(e,x=>{x==="Canvas"&&setTimeout(()=>{l.value&&E()},300)},{immediate:!0});const u=vt(null),c=Math.round(window.devicePixelRatio||window.webkitDevicePixelRatio||window.mozDevicePixelRatio||1),h=Math.round(340*c),v=Math.round(570*c),E=()=>{console.log(c,"dpr");const x=u.value.getContext("2d");x.fillStyle="#ffffff",x.fillRect(0,0,h,v);const g=new Image;g.onload=function(){x.drawImage(g,20*c,20*c,50*c,50*c)},g.src="/portfolio/src/assets/icons/logo.png",x.fillStyle="#000",x.font=`${16*c}px \u5FAE\u8F6F\u96C5\u9ED1`,x.fillText("\u5BFC\u8D2D9527",90*c,50*c);const p=new Image;p.crossOrigin="Anonymous",p.onload=function(){x.drawImage(p,20*c,80*c,300*c,300*c)},p.src=t.goodsImg,A(t.goodsName,20*c,390*c,200*c,15*c,1.15,x),x.fillStyle="#C21E1F",x.font=`${20*c}px \u5FAE\u8F6F\u96C5\u9ED1`,x.textBaseline="top",x.fillText(`\xA5${t.goodsSalePrice}`,250*c,400*c),x.fillStyle="#BBBBBB",x.font=`${13*c}px \u5FAE\u8F6F\u96C5\u9ED1`,x.fillText(`\xA5${t.goodsPrice}`,260*c,420*c);const S=x.measureText(`\xA5${t.goodsPrice}`).width;x.moveTo(260*c,425*c),x.lineTo(260*c+S,425*c),x.lineWidth=1,x.strokeStyle="#bbb",x.stroke();const d=new Image;d.onload=function(){x.drawImage(d,121*c,430*c,98*c,98*c)},d.src=s.value,x.fillStyle="#000",x.font=`${12*c}px \u5FAE\u8F6F\u96C5\u9ED1`,x.fillText("\u626B\u7801\u7ACB\u5373\u8D2D\u4E70",134*c,530*c),l.value=!1};function A(x,g,p,S,d,y,m){let w=x.split(""),P="",D=[];m.font=`${d}px \u5FAE\u8F6F\u96C5\u9ED1`,m.fillStyle="black",m.textBaseline="middle";for(let B=0;B<w.length;B++)m.measureText(P).width>S&&(D.push(P),P=""),P+=w[B];D.push(P);for(let B=0;B<D.length;B++)m.fillText(D[B],g,p+(B+1)*d*y)}const k=()=>{let x=document.createElement("a");if(x.download="my-image-name.jpeg",e.value==="HTML")x.href=o.value;else{const g=u.value.toDataURL("image/png");console.log(g,"dataUrl"),x.href=g}x.click()};return(x,g)=>{const p=Ye,S=Qe;return Ae(),_e("div",ro,[Pt(S,{modelValue:e.value,"onUpdate:modelValue":g[0]||(g[0]=d=>e.value=d),class:"type-btn"},{default:tr(()=>[Pt(p,{label:"HTML"}),Pt(p,{label:"Canvas"})]),_:1},8,["modelValue"]),se(W("div",no,[W("div",{class:"poster-html",ref_key:"posterHtml",ref:n},[oo,W("img",{class:"poster-img",src:t.goodsImg,alt:"",onLoad:i},null,40,io),W("div",so,[W("div",ao,Ot(t.goodsName),1),W("div",lo,[W("span",co,[uo,er(" "+Ot(t.goodsSalePrice),1)]),W("span",fo,"\xA5 "+Ot(t.goodsPrice),1)])]),W("div",ho,[Pt(un,{class:"qr-img",text:t.url,callback:a},null,8,["text"]),go])],512)],512),[[ae,e.value==="HTML"]]),se(W("div",po,[W("canvas",{ref_key:"posterCanvas",ref:u,width:le(h),height:le(v),style:{width:"340px",height:"570px"}},null,8,mo)],512),[[ae,e.value==="Canvas"]]),W("div",{class:"download-btn",onClick:k},"\u4E0B\u8F7D\u6D77\u62A5")])}}},Co=Te(vo,[["__scopeId","data-v-ebe71345"]]);export{Co as default};
