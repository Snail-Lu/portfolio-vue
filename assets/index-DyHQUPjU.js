import{D as S}from"./index-b_4R8An8.js";import{_ as D,d as M}from"./index-BPsOo1ew.js";import{c as N}from"./index-BspFbZUq.js";import{k as g,b as A,n as y,o as r,q as f,P as w,Q as b,U as C,J as B,K as _,S as q,Y as E,c as L,w as V,a as z}from"./elementPlus-OXnB-esK.js";const H={class:"waterfall-card"},T=["src"],$={class:"title"},j={__name:"index",props:{data:{type:Array,default:()=>[]},col:{type:Number,default:2},gaps:{type:Array,default:()=>["0px","0px"]},firstPageCount:{type:Number,default:10},animation:{type:String,default:"hapi"},rootMargin:{type:String,default:"0px 0px 400px 0px"}},setup(l){let i,a=0,s=[],c=0;const e=l,p=g([]);(()=>{for(let t=0;t<e.col;t++)p.value[t]=[]})(),A(()=>e.data,t=>{s=[...s,...t],v()});function v(){k(),P(),++c<e.firstPageCount?y(()=>{v()}):y(()=>{I()})}const x=g(null);function k(){if(c<e.firstPageCount){a=c%e.col;return}const t=x.value.map(u=>u.offsetHeight),o=Math.min(...t);a=t.indexOf(o)}function I(){const t=x.value[a].querySelectorAll(".waterfall-img"),o=t[t.length-1];i.observe(o)}function P(){const t=s.shift();p.value[a].push(t)}function O(){(N()?Promise.resolve():M(()=>import("./intersection-observer-L-7XizlD.js"),__vite__mapDeps([]))).then(()=>{i=new IntersectionObserver(o=>{for(const u of o){const{target:n,isIntersecting:d}=u;if(d){const m=()=>{s.length&&v(),i.unobserve(n)};n.complete?m():n.onload=n.onerror=m}}},{rootMargin:e.rootMargin})})}return O(),(t,o)=>(r(),f("div",{class:"waterfall-wrapper",style:C({"column-gap":l.gaps[1]})},[(r(!0),f(w,null,b(p.value,(u,n)=>(r(),f("div",{class:"col-wrapper",ref_for:!0,ref_key:"cols",ref:x,key:n,style:C({"row-gap":l.gaps[0]})},[(r(!0),f(w,null,b(u,(d,m)=>(r(),f("div",{class:B(["row-wrapper",[l.animation]]),key:m},[_("div",H,[_("img",{class:"waterfall-img",src:d.img},null,8,T),_("p",$,q(d.value),1)])],2))),128))],4))),128))],4))}},F=D(j,[["__scopeId","data-v-b8456476"]]),J={class:"masonry flex-box flex-h-center"},K={__name:"index",setup(l){const i=g({title:"瀑布流",url:""}),a=g([]),s=E();async function c(){let e=await s.proxy.req({url:"/masonry/list"});e.result&&e.result.list&&(a.value=e.result.list)}return c(),(e,p)=>{const h=S;return r(),L(h,{data:i.value},{default:V(()=>[_("div",J,[z(F,{data:a.value,gaps:["10px","10px"]},null,8,["data"])])]),_:1},8,["data"])}}},Y=D(K,[["__scopeId","data-v-d9b55fca"]]);export{Y as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
