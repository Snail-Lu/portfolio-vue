import{_ as I,b as O}from"./index.fe800f29.js";import{c as M}from"./index.4627d5e4.js";import{k as y,b as S,o as n,t as s,F as h,D as x,G as b,x as A,C as v,J as N,n as w}from"./elementPlus.30f16aef.js";const B={class:"waterfall-card"},E=["src"],L={class:"title"},z={__name:"index",props:{data:{type:Array,default:()=>[]},col:{type:Number,default:2},gaps:{type:Array,default:()=>["0px","0px"]},firstPageCount:{type:Number,default:10},animation:{type:String,default:"hapi"},rootMargin:{type:String,default:"0px 0px 400px 0px"}},setup(l){const t=l;let p,i=0,c=[],d=0;const m=y([]);(()=>{for(let e=0;e<t.col;e++)m.value[e]=[]})(),S(()=>t.data,e=>{c=[...c,...e],_()});function _(){C(),D(),++d<t.firstPageCount?w(()=>{_()}):w(()=>{k()})}const g=y(null);function C(){if(d<t.firstPageCount){i=d%t.col;return}const e=g.value.map(r=>r.offsetHeight),a=Math.min(...e);i=e.indexOf(a)}function k(){const e=g.value[i].querySelectorAll(".waterfall-img"),a=e[e.length-1];p.observe(a)}function D(){const e=c.shift();m.value[i].push(e)}function P(){(M()?Promise.resolve():O(()=>import("./intersection-observer.ec739b88.js"),[])).then(()=>{p=new IntersectionObserver(a=>{for(const r of a){const{target:o,isIntersecting:u}=r;if(u){const f=()=>{c.length&&_(),p.unobserve(o)};o.complete?f():o.onload=o.onerror=f}}},{rootMargin:t.rootMargin})})}return P(),(e,a)=>(n(),s("div",{class:"waterfall-wrapper",style:b({"column-gap":l.gaps[1]})},[(n(!0),s(h,null,x(m.value,(r,o)=>(n(),s("div",{class:"col-wrapper",ref_for:!0,ref_key:"cols",ref:g,key:o,style:b({"row-gap":l.gaps[0]})},[(n(!0),s(h,null,x(r,(u,f)=>(n(),s("div",{class:A(["row-wrapper",[l.animation]]),key:f},[v("div",B,[v("img",{class:"waterfall-img",src:u.img},null,8,E),v("p",L,N(u.value),1)])],2))),128))],4))),128))],4))}},W=I(z,[["__scopeId","data-v-b8456476"]]);export{W};
