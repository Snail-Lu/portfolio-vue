import{_ as v}from"./index.1d645095.js";import{D as d}from"./index.323ec64a.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    *//* empty css                  */import{P as x,U as f,V as _,W as k,X as z,o as s,c as p,w as g,b as t,t as w,A as y,B as G,Y as S,a as I,z as C}from"./elementPlus.8cc4687e.js";const N={components:{Demo:d},name:"TableSelect",data(){return{demoInfo:{title:"\u8868\u683C\u5206\u9875\u591A\u9009",url:"https://snail-lu.vercel.app/2021-11-11-element-ui-zhong-el-table-fan-ye-duo-xuan-shi-xian.html"},tableData:[],goodsTotal:0,tableLoading:!1,selectedGoodsIds:[],selectedGoodsIdsOther:[],selectedGoodsIdsAll:[],showSelectedGoods:!1,goodsForm:{pageInfo:{pageNum:1,pageSize:5}}}},created(){this.onSearchGoods()},methods:{handleGoodsPageChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageNum=e,this.onSearchGoods()},handleGoodsSizeChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageSize=e,this.onSearchGoods()},onSearchGoods(){this.tableLoading=!0,this.queryGoods(this.goodsForm).then(e=>{this.tableData=e.list,this.toggleSelection(),this.goodsTotal=e.total,this.tableLoading=!1},()=>{this.tableLoading=!1})},toggleSelection(){const e=[],o=this.selectedGoodsIdsAll.slice();this.$nextTick(()=>{this.tableData.forEach(a=>{if(this.selectedGoodsIdsAll.includes(a.id)){this.$refs.multipleTable.toggleRowSelection(a,!0),e.push(a.id);const l=o.indexOf(a.id);o.splice(l,1)}}),this.selectedGoodsIds=e,this.selectedGoodsIdsOther=o})},handleSelectionChange(e){this.selectedGoodsIds=e.map(o=>o.id)},getAllSelectedGoodsId(){const{selectedGoodsIds:e,selectedGoodsIdsOther:o}=this;this.selectedGoodsIdsAll=[...o,...e]},onPrint(){this.showSelectedGoods=!0,this.getAllSelectedGoodsId()},queryGoods(e){const{pageInfo:o}=e,{pageNum:a,pageSize:l}=o,i=[{id:1,goodsName:"\u6D4B\u8BD5\u5546\u54C11",goodsCode:"000001",goodsPrice:101},{id:2,goodsName:"\u6D4B\u8BD5\u5546\u54C12",goodsCode:"000002",goodsPrice:102},{id:3,goodsName:"\u6D4B\u8BD5\u5546\u54C13",goodsCode:"000003",goodsPrice:103},{id:4,goodsName:"\u6D4B\u8BD5\u5546\u54C14",goodsCode:"000004",goodsPrice:104},{id:5,goodsName:"\u6D4B\u8BD5\u5546\u54C15",goodsCode:"000005",goodsPrice:105},{id:6,goodsName:"\u6D4B\u8BD5\u5546\u54C16",goodsCode:"000006",goodsPrice:106},{id:7,goodsName:"\u6D4B\u8BD5\u5546\u54C17",goodsCode:"000007",goodsPrice:107},{id:8,goodsName:"\u6D4B\u8BD5\u5546\u54C18",goodsCode:"000008",goodsPrice:108},{id:9,goodsName:"\u6D4B\u8BD5\u5546\u54C19",goodsCode:"000009",goodsPrice:109},{id:10,goodsName:"\u6D4B\u8BD5\u5546\u54C110",goodsCode:"0000010",goodsPrice:110}];return new Promise(n=>{setTimeout(()=>{n({list:i.slice((a-1)*l,a*l),total:i.length})},1e3)})}}},P=C("\u6253\u5370\u6240\u6709\u5DF2\u9009\u6570\u636EID"),A={key:0},q={class:"flex-box flex-h-end"};function T(e,o,a,l,i,n){const c=x,r=f,h=_,b=k,u=d,m=z;return s(),p(u,{data:i.demoInfo},{default:g(()=>[t(c,{onClick:n.onPrint,type:"primary",size:"mini",style:{"margin-bottom":"20px"}},{default:g(()=>[P]),_:1},8,["onClick"]),i.showSelectedGoods?(s(),w("span",A,y(i.selectedGoodsIdsAll.length?i.selectedGoodsIdsAll.join(" "):""),1)):G("",!0),S((s(),p(h,{ref:"multipleTable",data:i.tableData,border:"",height:"450","header-cell-style":{background:"#F5F7FA",color:"#606266",textAlign:"center"},"cell-style":{textAlign:"center"},onSelect:n.handleSelectionChange,onSelectAll:n.handleSelectionChange},{default:g(()=>[t(r,{type:"selection"}),t(r,{prop:"id",label:"ID"}),t(r,{prop:"goodsName",label:"\u5546\u54C1\u540D\u79F0"}),t(r,{prop:"goodsCode",label:"\u6B3E\u53F7"}),t(r,{prop:"goodsPrice",label:"\u540A\u724C\u4EF7\u683C\uFF08\u5143\uFF09"})]),_:1},8,["data","onSelect","onSelectAll"])),[[m,i.tableLoading]]),I("div",q,[t(b,{background:"",layout:"total,prev,sizes, pager, next",total:i.goodsTotal,"page-size":i.goodsForm.pageInfo.pageSize,"current-page":i.goodsForm.pageInfo.pageNum,onSizeChange:n.handleGoodsSizeChange,onCurrentChange:n.handleGoodsPageChange,"page-sizes":[5,10]},null,8,["total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1},8,["data"])}var W=v(N,[["render",T],["__scopeId","data-v-5b6a64b8"]]);export{W as default};
