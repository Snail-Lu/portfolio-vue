import{o as f,q as $,K as s,Y as w,k as v,c as B,w as e,a as o,_ as u,B as C,aA as H,aM as L,W as M,X as V}from"./elementPlus-OXnB-esK.js";import{_ as F,e as S}from"./index-BPsOo1ew.js";/* empty css                    *//* empty css                  */import{D as z}from"./index-b_4R8An8.js";const E={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},T=s("path",{fill:"currentColor",d:"M878.08 448H241.92l-96 384h636.16zM832 384v-64H485.76L357.504 192H128v448l57.92-231.744A32 32 0 0 1 216.96 384zm-24.96 512H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h287.872l128.384 128H864a32 32 0 0 1 32 32v96h23.04a32 32 0 0 1 31.04 39.744l-112 448A32 32 0 0 1 807.04 896"},null,-1),q=[T];function A(r,p){return f(),$("svg",E,[...q])}const D={name:"ep-folder-opened",render:A},N={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},O=s("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64m384-578.304V704h-64V247.296L237.248 490.048L192 444.8L508.8 128l316.8 316.8l-45.312 45.248z"},null,-1),K=[O];function j(r,p){return f(),$("svg",N,[...K])}const W={name:"ep-upload",render:j},i=r=>(M("data-v-db792244"),r=r(),V(),r),X=i(()=>s("div",{class:"header"},"方式1：即时上传",-1)),Y=i(()=>s("div",{class:"el-upload__tip"},"在action属性上绑定上传接口地址，利用on-success或on-error监听上传结果",-1)),G=i(()=>s("div",{class:"header"},"方式2：延时上传",-1)),J=i(()=>s("div",{class:"el-upload__tip"},"auto-upload设为false，文件选择后不会立即上传，后续可以通过调用el-upload的submit()方法上传",-1)),P=i(()=>s("div",{class:"header"},"上传方式3：自定义上传",-1)),Q=i(()=>s("div",{class:"el-upload__tip"}," action需要使用任意字段填充，http-request上绑定自定义上传方法，如果需要延时上传，仿照上传方式2设置 ",-1)),R={__name:"index",setup(r){const p={importUrl:"/api/fileUpload"},b={title:"el-upload文件上传用例",url:"https://github.com/Snail-Lu/portfolio-vue/blob/main/src/views/demo/elUpload/index.vue"},c=w(),h=t=>{t.status==="OK"?c.proxy.$message({type:"suceess",message:t.message}):c.proxy.$message({type:"error",message:t.message})},g=t=>{console.log(t,"error"),c.proxy.$message({type:"error",message:`上传失败${t}`})},U=t=>{const m=t.file,d=m.type,a=d.indexOf("image")!=-1,_=m.size/1024/1024<2;if(!a){c.proxy.$message.error("只能上传图片格式png、jpg、gif!");return}if(!_){c.proxy.$message.error("只能上传图片大小小于2M");return}const n=new FormData;n.append("file",m),S.post(p.importUrl,n,{headers:{"content-type":"multipart/form-data"}}).then(l=>{l&&parseInt(l.code,10)}).catch(l=>{c.proxy.$message.error(`上传失败${l}`)})},x=v(null),k=()=>{x.value.submit()},y=v(null),I=()=>{y.value.submit()};return(t,m)=>{const d=W,a=C,_=H,n=L,l=D;return f(),B(z,{data:b},{default:e(()=>[o(n,{class:"card-box"},{header:e(()=>[X]),default:e(()=>[o(_,{name:"importFile",action:p.importUrl,"on-error":g,"on-success":h},{tip:e(()=>[Y]),default:e(()=>[o(a,{type:"primary"},{default:e(()=>[o(d),u(" 选择文件并上传")]),_:1})]),_:1},8,["action"])]),_:1}),o(n,{class:"card-box"},{header:e(()=>[G]),default:e(()=>[o(_,{name:"importFile",ref_key:"upload2",ref:x,action:p.importUrl,"on-error":g,"on-success":h,"auto-upload":!1},{trigger:e(()=>[o(a,{type:"primary"},{default:e(()=>[o(l),u("选择文件")]),_:1})]),tip:e(()=>[J]),default:e(()=>[o(a,{type:"success",onClick:k,class:"ml-3"},{default:e(()=>[o(d),u("上传")]),_:1})]),_:1},8,["action"])]),_:1}),o(n,{class:"card-box"},{header:e(()=>[P]),default:e(()=>[o(_,{class:"upload-add-demo",action:"#",ref_key:"upload3",ref:y,multiple:"",limit:3,"http-request":U,"auto-upload":!1},{trigger:e(()=>[o(a,{type:"primary"},{default:e(()=>[o(l),u("选择文件")]),_:1})]),tip:e(()=>[Q]),default:e(()=>[o(a,{type:"success",onClick:I,class:"ml-3"},{default:e(()=>[o(d),u("上传")]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ae=F(R,[["__scopeId","data-v-db792244"]]);export{ae as default};
