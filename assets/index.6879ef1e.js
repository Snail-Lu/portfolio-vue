import{_ as k}from"./index.80b0378e.js";/* empty css                     *//* empty css                    *//* empty css                */import{o as u,m as C,D as B,O,f as T,b as D,k as h,a5 as N,a8 as j,af as A,ag as H,Z as G,R as P,ah as $,Y as z,aa as M,c as f,w as o,a as l,N as w,H as v}from"./elementPlus.d15cb521.js";/* empty css                        *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 */import{g as S}from"./date.e37664b7.js";import{D as Y}from"./index.466a3e50.js";const Z={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},q=B("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),J=[q];function K(n,s){return u(),C("svg",Z,J)}const Q={name:"ep-plus",render:K};function W(n,s,c="a"){return new Promise(e=>{const t=new Image;t.crossOrigin="*",t.onload=function(){const a=b(t,s),i=y(a,c);e(i)},t.src=n})}function b(n,s="\u6211\u662F\u4E00\u6BB5\u6C34\u5370"){const{width:c,height:e}=n,t=document.createElement("canvas");t.width=c,t.height=e;const a=t.getContext("2d");a.drawImage(n,0,0,c,e),a.fillStyle="red",a.font="50px sans-serif",a.fillText(s,100,100);const U=`image/${n.src.substring(n.src.lastIndexOf(".")+1).toLowerCase()}`;return t.toDataURL(U)}function y(n,s){let c=n.split(","),e=c[0].match(/:(.*?);/)[1],t=atob(c[1]),a=t.length,i=new Uint8Array(a);for(;a--;)i[a]=t.charCodeAt(a);return new File([i],s,{type:e})}function X(n){return new Promise((s,c)=>{let e=new FileReader;e.addEventListener("load",()=>{let t=new Image;t.src=e.result,t.addEventListener("load",()=>s(t))}),e.readAsDataURL(n)})}const ee={__name:"index",setup(n){const s={title:"\u56FE\u7247\u6C34\u5370",url:""},c=O(),e=T({text:S(),imgUrl:"https://t7.baidu.com/it/u=2168645659,3174029352&fm=193&f=GIF",transformedImgUrl:"",type:1});D(()=>e.type,()=>{e.transformedImgUrl=""});const t=h([]),a=h("");async function i(m){console.log(m,"upload file"),a.value=URL.createObjectURL(m.raw);let r=await X(m.raw);const g=b(r,e.text),d=y(g,"a"),_=URL.createObjectURL(d);e.transformedImgUrl=_,t.value=[_]}async function U(){if(e.imgUrl){const m=await W(e.imgUrl,e.text),r=URL.createObjectURL(m);e.transformedImgUrl=r,t.value=[r]}else c.proxy.$message.error("\u8BF7\u8F93\u5165\u7F51\u7EDC\u56FE\u7247\u5730\u5740")}return(m,r)=>{const g=N,d=j,_=A,I=H,L=G,x=P,R=Q,V=$,E=z,F=M;return u(),f(Y,{data:s},{default:o(()=>[l(F,{model:e,"label-width":"120px"},{default:o(()=>[l(d,{label:"\u6C34\u5370\u5185\u5BB9\uFF1A"},{default:o(()=>[l(g,{modelValue:e.text,"onUpdate:modelValue":r[0]||(r[0]=p=>e.text=p)},null,8,["modelValue"])]),_:1}),l(d,{label:"\u56FE\u7247\u7C7B\u578B\uFF1A"},{default:o(()=>[l(I,{modelValue:e.type,"onUpdate:modelValue":r[1]||(r[1]=p=>e.type=p)},{default:o(()=>[l(_,{label:1},{default:o(()=>[w("\u7F51\u7EDC\u56FE\u7247")]),_:1}),l(_,{label:2},{default:o(()=>[w("\u672C\u5730\u56FE\u7247")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.type==1?(u(),f(d,{key:0,label:"\u56FE\u7247\u5730\u5740\uFF1A"},{default:o(()=>[l(g,{modelValue:e.imgUrl,"onUpdate:modelValue":r[2]||(r[2]=p=>e.imgUrl=p)},{append:o(()=>[l(L,{onClick:U},{default:o(()=>[w("\u6DFB\u52A0\u6C34\u5370")]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0),e.type==2?(u(),f(d,{key:1,label:"\u672C\u5730\u56FE\u7247\uFF1A"},{default:o(()=>[l(E,{class:"avatar-uploader",action:"#","auto-upload":!1,"on-change":i,"show-file-list":!1},{default:o(()=>[a.value?(u(),f(x,{key:0,src:a.value,class:"avatar",fit:"contain"},null,8,["src"])):(u(),f(V,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[l(R)]),_:1}))]),_:1})]),_:1})):v("",!0),l(d,{label:"\u6C34\u5370\u6548\u679C\uFF1A"},{default:o(()=>[l(x,{style:{width:"150px",height:"150px"},src:e.transformedImgUrl,"preview-src-list":t.value,fit:"contain"},null,8,["src","preview-src-list"])]),_:1})]),_:1},8,["model"])]),_:1})}}},_e=k(ee,[["__scopeId","data-v-dea32bc4"]]);export{_e as default};
