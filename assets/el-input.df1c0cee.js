import{N,x as ye,j as De,aM as Le,k as J,aL as ke,ab as Z,l as He,a8 as We,aQ as Ke,u as v,aO as Ue,aT as qe,v as ze,P as ee,bg as Qe,bh as Xe,bi as Ye,a$ as Ge,Q as oe,R as $,S as Je,au as Ze,aI as eo,a2 as oo,a3 as ro,o as s,c as m,h as c,F as re,n as h,A as o,z as H,e as P,b as w,w as F,d as W,V as B,a9 as te,a as to,b7 as no,U as lo,aA as io,t as K,B as ao,C as po,I as so,y as Se,ah as uo,D as co}from"./index.4fd17523.js";import{m as vo}from"./typescript2.b7eef2c1.js";import{U as ne}from"./event2.de93cf03.js";import{u as bo}from"./index2.dbf530df.js";import{a as fo,u as ho}from"./index2.f1e30ab4.js";import{d as Ce}from"./error2.0bf5905b.js";import{i as xo}from"./isNil.98bb3b88.js";const go=t=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t);function _o(t){const b=N();function i(){if(t.value==null)return;const{selectionStart:u,selectionEnd:f,value:a}=t.value;if(u==null||f==null)return;const _=a.slice(0,Math.max(0,u)),p=a.slice(Math.max(0,f));b.value={selectionStart:u,selectionEnd:f,value:a,beforeTxt:_,afterTxt:p}}function r(){if(t.value==null||b.value==null)return;const{value:u}=t.value,{beforeTxt:f,afterTxt:a,selectionStart:_}=b.value;if(f==null||a==null||_==null)return;let p=u.length;if(u.endsWith(a))p=u.length-a.length;else if(u.startsWith(f))p=f.length;else{const x=f[_-1],y=u.indexOf(x,_-1);y!==-1&&(p=y+1)}t.value.setSelectionRange(p,p)}return[i,r]}let g;const mo=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,wo=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function yo(t){const b=window.getComputedStyle(t),i=b.getPropertyValue("box-sizing"),r=Number.parseFloat(b.getPropertyValue("padding-bottom"))+Number.parseFloat(b.getPropertyValue("padding-top")),u=Number.parseFloat(b.getPropertyValue("border-bottom-width"))+Number.parseFloat(b.getPropertyValue("border-top-width"));return{contextStyle:wo.map(a=>`${a}:${b.getPropertyValue(a)}`).join(";"),paddingSize:r,borderSize:u,boxSizing:i}}function Ie(t,b=1,i){var r;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:u,borderSize:f,boxSizing:a,contextStyle:_}=yo(t);g.setAttribute("style",`${_};${mo}`),g.value=t.value||t.placeholder||"";let p=g.scrollHeight;const x={};a==="border-box"?p=p+f:a==="content-box"&&(p=p-u),g.value="";const y=g.scrollHeight-u;if(ye(b)){let d=y*b;a==="border-box"&&(d=d+u+f),p=Math.max(d,p),x.minHeight=`${d}px`}if(ye(i)){let d=y*i;a==="border-box"&&(d=d+u+f),p=Math.min(d,p)}return x.height=`${p}px`,(r=g.parentNode)==null||r.removeChild(g),g=void 0,x}const ko=De({id:{type:String,default:void 0},size:Le,disabled:Boolean,modelValue:{type:J([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:J([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:ke,default:""},prefixIcon:{type:ke,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:J([Object,Array,String]),default:()=>vo({})}}),zo={[ne]:t=>Z(t),input:t=>Z(t),change:t=>Z(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},So=["role"],Co=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],Io=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],Eo={name:"ElInput",inheritAttrs:!1},$o=He({...Eo,props:ko,emits:zo,setup(t,{expose:b,emit:i}){const r=t,u={suffix:"append",prefix:"prepend"},f=uo(),a=We(),_=Ke(),p=v(()=>{const e={};return r.containerRole==="combobox"&&(e["aria-haspopup"]=a["aria-haspopup"],e["aria-owns"]=a["aria-owns"],e["aria-expanded"]=a["aria-expanded"]),e}),x=bo({excludeKeys:v(()=>Object.keys(p.value))}),{form:y,formItem:d}=fo(),{inputId:le}=ho(r,{formItemContext:d}),Ee=Ue(),C=qe(),n=ze("input"),ie=ze("textarea"),O=ee(),I=ee(),V=N(!1),U=N(!1),A=N(!1),R=N(!1),ae=N(),q=ee(r.inputStyle),T=v(()=>O.value||I.value),pe=v(()=>{var e;return(e=y==null?void 0:y.statusIcon)!=null?e:!1}),M=v(()=>(d==null?void 0:d.validateState)||""),se=v(()=>M.value&&Qe[M.value]),$e=v(()=>R.value?Xe:Ye),Pe=v(()=>[a.style,r.inputStyle]),ue=v(()=>[r.inputStyle,q.value,{resize:r.resize}]),k=v(()=>xo(r.modelValue)?"":String(r.modelValue)),j=v(()=>r.clearable&&!C.value&&!r.readonly&&!!k.value&&(V.value||U.value)),Q=v(()=>r.showPassword&&!C.value&&!r.readonly&&!!k.value&&(!!k.value||V.value)),E=v(()=>r.showWordLimit&&!!x.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!C.value&&!r.readonly&&!r.showPassword),X=v(()=>Array.from(k.value).length),Ne=v(()=>!!E.value&&X.value>Number(x.value.maxlength)),Ve=v(()=>!!_.suffix||!!r.suffixIcon||j.value||r.showPassword||E.value||!!M.value&&pe.value),[Ae,Te]=_o(O);Ge(I,e=>{if(!E.value||r.resize!=="both")return;const l=e[0],{width:z}=l.contentRect;ae.value={right:`calc(100% - ${z+15+6}px)`}});const D=()=>{const{type:e,autosize:l}=r;if(!(!so||e!=="textarea"))if(l){const z=Se(l)?l.minRows:void 0,S=Se(l)?l.maxRows:void 0;q.value={...Ie(I.value,z,S)}}else q.value={minHeight:Ie(I.value).minHeight}},L=()=>{const e=T.value;!e||e.value===k.value||(e.value=k.value)},de=e=>{const{el:l}=f.vnode;if(!l)return;const S=Array.from(l.querySelectorAll(`.${n.e(e)}`)).find(je=>je.parentNode===l);if(!S)return;const we=u[e];_[we]?S.style.transform=`translateX(${e==="suffix"?"-":""}${l.querySelector(`.${n.be("group",we)}`).offsetWidth}px)`:S.removeAttribute("style")},Y=()=>{de("prefix"),de("suffix")},G=async e=>{Ae();let{value:l}=e.target;r.formatter&&(l=r.parser?r.parser(l):l,l=r.formatter(l)),!A.value&&l!==k.value&&(i(ne,l),i("input",l),await $(),L(),Te())},ce=e=>{i("change",e.target.value)},ve=e=>{i("compositionstart",e),A.value=!0},be=e=>{var l;i("compositionupdate",e);const z=(l=e.target)==null?void 0:l.value,S=z[z.length-1]||"";A.value=!go(S)},fe=e=>{i("compositionend",e),A.value&&(A.value=!1,G(e))},Me=()=>{R.value=!R.value,he()},he=async()=>{var e;await $(),(e=T.value)==null||e.focus()},Fe=()=>{var e;return(e=T.value)==null?void 0:e.blur()},xe=e=>{V.value=!0,i("focus",e)},ge=e=>{var l;V.value=!1,i("blur",e),r.validateEvent&&((l=d==null?void 0:d.validate)==null||l.call(d,"blur").catch(z=>Ce()))},Be=e=>{U.value=!1,i("mouseleave",e)},Oe=e=>{U.value=!0,i("mouseenter",e)},_e=e=>{i("keydown",e)},Re=()=>{var e;(e=T.value)==null||e.select()},me=()=>{i(ne,""),i("change",""),i("clear"),i("input","")};return oe(()=>r.modelValue,()=>{var e;$(()=>D()),r.validateEvent&&((e=d==null?void 0:d.validate)==null||e.call(d,"change").catch(l=>Ce()))}),oe(k,()=>L()),oe(()=>r.type,async()=>{await $(),L(),D(),Y()}),Je(async()=>{!r.formatter&&r.parser,L(),Y(),await $(),D()}),Ze(async()=>{await $(),Y()}),b({input:O,textarea:I,ref:T,textareaStyle:ue,autosize:eo(r,"autosize"),focus:he,blur:Fe,select:Re,clear:me,resizeTextarea:D}),(e,l)=>oo((s(),m("div",te(o(p),{class:[e.type==="textarea"?o(ie).b():o(n).b(),o(n).m(o(Ee)),o(n).is("disabled",o(C)),o(n).is("exceed",o(Ne)),{[o(n).b("group")]:e.$slots.prepend||e.$slots.append,[o(n).bm("group","append")]:e.$slots.append,[o(n).bm("group","prepend")]:e.$slots.prepend,[o(n).m("prefix")]:e.$slots.prefix||e.prefixIcon,[o(n).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[o(n).bm("suffix","password-clear")]:o(j)&&o(Q)},e.$attrs.class],style:o(Pe),role:e.containerRole,onMouseenter:Oe,onMouseleave:Be}),[c(" input "),e.type!=="textarea"?(s(),m(re,{key:0},[c(" prepend slot "),e.$slots.prepend?(s(),m("div",{key:0,class:h(o(n).be("group","prepend"))},[H(e.$slots,"prepend")],2)):c("v-if",!0),P("div",{class:h([o(n).e("wrapper"),o(n).is("focus",V.value)])},[c(" prefix slot "),e.$slots.prefix||e.prefixIcon?(s(),m("span",{key:0,class:h(o(n).e("prefix"))},[P("span",{class:h(o(n).e("prefix-inner"))},[H(e.$slots,"prefix"),e.prefixIcon?(s(),w(o(B),{key:0,class:h(o(n).e("icon"))},{default:F(()=>[(s(),w(W(e.prefixIcon)))]),_:1},8,["class"])):c("v-if",!0)],2)],2)):c("v-if",!0),P("input",te({id:o(le),ref_key:"input",ref:O,class:o(n).e("inner")},o(x),{type:e.showPassword?R.value?"text":"password":e.type,disabled:o(C),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:G,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,Co),c(" suffix slot "),o(Ve)?(s(),m("span",{key:1,class:h(o(n).e("suffix"))},[P("span",{class:h(o(n).e("suffix-inner"))},[!o(j)||!o(Q)||!o(E)?(s(),m(re,{key:0},[H(e.$slots,"suffix"),e.suffixIcon?(s(),w(o(B),{key:0,class:h(o(n).e("icon"))},{default:F(()=>[(s(),w(W(e.suffixIcon)))]),_:1},8,["class"])):c("v-if",!0)],64)):c("v-if",!0),o(j)?(s(),w(o(B),{key:1,class:h([o(n).e("icon"),o(n).e("clear")]),onMousedown:lo(o(io),["prevent"]),onClick:me},{default:F(()=>[to(o(no))]),_:1},8,["class","onMousedown"])):c("v-if",!0),o(Q)?(s(),w(o(B),{key:2,class:h([o(n).e("icon"),o(n).e("password")]),onClick:Me},{default:F(()=>[(s(),w(W(o($e))))]),_:1},8,["class"])):c("v-if",!0),o(E)?(s(),m("span",{key:3,class:h(o(n).e("count"))},[P("span",{class:h(o(n).e("count-inner"))},K(o(X))+" / "+K(o(x).maxlength),3)],2)):c("v-if",!0),o(M)&&o(se)&&o(pe)?(s(),w(o(B),{key:4,class:h([o(n).e("icon"),o(n).e("validateIcon"),o(n).is("loading",o(M)==="validating")])},{default:F(()=>[(s(),w(W(o(se))))]),_:1},8,["class"])):c("v-if",!0)],2)],2)):c("v-if",!0)],2),c(" append slot "),e.$slots.append?(s(),m("div",{key:1,class:h(o(n).be("group","append"))},[H(e.$slots,"append")],2)):c("v-if",!0)],64)):(s(),m(re,{key:1},[c(" textarea "),P("textarea",te({id:o(le),ref_key:"textarea",ref:I,class:o(ie).e("inner")},o(x),{tabindex:e.tabindex,disabled:o(C),readonly:e.readonly,autocomplete:e.autocomplete,style:o(ue),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:G,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,Io),o(E)?(s(),m("span",{key:0,style:ao(ae.value),class:h(o(n).e("count"))},K(o(X))+" / "+K(o(x).maxlength),7)):c("v-if",!0)],64))],16,So)),[[ro,e.type!=="hidden"]])}});var Po=po($o,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Oo=co(Po);export{Oo as E,go as i};
