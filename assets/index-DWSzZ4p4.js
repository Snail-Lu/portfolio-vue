import{L as f}from"./index-BFPj6N7J.js";import{D as r}from"./index-CsToVXX2.js";import{_ as G}from"./index-qd-9JBwJ.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    *//* empty css                  */import{o as n,c as g,w as c,a as l,_ as S,q as I,S as C,R as b,N,K as x,B as P,aD as A,aE as z,aF as y}from"./elementPlus-OXnB-esK.js";const D={components:{Demo:r},name:"TableSelect",data(){return{demoInfo:{title:"表格分页多选",url:"https://snail-lu.vercel.app/2021-11-11-element-ui-zhong-el-table-fan-ye-duo-xuan-shi-xian.html"},tableData:[],goodsTotal:0,tableLoading:!1,selectedGoodsIds:[],selectedGoodsIdsOther:[],selectedGoodsIdsAll:[],showSelectedGoods:!1,goodsForm:{pageInfo:{pageNum:1,pageSize:5}}}},created(){this.onSearchGoods()},methods:{handleGoodsPageChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageNum=e,this.onSearchGoods()},handleGoodsSizeChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageSize=e,this.onSearchGoods()},onSearchGoods(){this.tableLoading=!0,this.queryGoods(this.goodsForm).then(e=>{this.tableData=e.list,this.toggleSelection(),this.goodsTotal=e.total,this.tableLoading=!1},()=>{this.tableLoading=!1})},toggleSelection(){const e=[],t=this.selectedGoodsIdsAll.slice();this.$nextTick(()=>{this.tableData.forEach(s=>{if(this.selectedGoodsIdsAll.includes(s.id)){this.$refs.multipleTable.toggleRowSelection(s,!0),e.push(s.id);const a=t.indexOf(s.id);t.splice(a,1)}}),this.selectedGoodsIds=e,this.selectedGoodsIdsOther=t})},handleSelectionChange(e){this.selectedGoodsIds=e.map(t=>t.id)},getAllSelectedGoodsId(){const{selectedGoodsIds:e,selectedGoodsIdsOther:t}=this;this.selectedGoodsIdsAll=[...t,...e]},onPrint(){this.showSelectedGoods=!0,this.getAllSelectedGoodsId()},queryGoods(e){const{pageInfo:t}=e,{pageNum:s,pageSize:a}=t,o=[{id:1,goodsName:"测试商品1",goodsCode:"000001",goodsPrice:101},{id:2,goodsName:"测试商品2",goodsCode:"000002",goodsPrice:102},{id:3,goodsName:"测试商品3",goodsCode:"000003",goodsPrice:103},{id:4,goodsName:"测试商品4",goodsCode:"000004",goodsPrice:104},{id:5,goodsName:"测试商品5",goodsCode:"000005",goodsPrice:105},{id:6,goodsName:"测试商品6",goodsCode:"000006",goodsPrice:106},{id:7,goodsName:"测试商品7",goodsCode:"000007",goodsPrice:107},{id:8,goodsName:"测试商品8",goodsCode:"000008",goodsPrice:108},{id:9,goodsName:"测试商品9",goodsCode:"000009",goodsPrice:109},{id:10,goodsName:"测试商品10",goodsCode:"0000010",goodsPrice:110}];return new Promise(d=>{setTimeout(()=>{d({list:o.slice((s-1)*a,s*a),total:o.length})},1e3)})}}},T={key:0},F={class:"flex-box flex-h-end"};function k(e,t,s,a,o,d){const h=P,i=A,m=z,p=y,u=r,_=f;return n(),g(u,{data:o.demoInfo},{default:c(()=>[l(h,{onClick:d.onPrint,type:"primary",size:"mini",style:{"margin-bottom":"20px"}},{default:c(()=>[S("打印所有已选数据ID")]),_:1},8,["onClick"]),o.showSelectedGoods?(n(),I("span",T,C(o.selectedGoodsIdsAll.length?o.selectedGoodsIdsAll.join(" "):""),1)):b("",!0),N((n(),g(m,{ref:"multipleTable",data:o.tableData,border:"",height:"450","header-cell-style":{background:"#F5F7FA",color:"#606266",textAlign:"center"},"cell-style":{textAlign:"center"},onSelect:d.handleSelectionChange,onSelectAll:d.handleSelectionChange},{default:c(()=>[l(i,{type:"selection"}),l(i,{prop:"id",label:"ID"}),l(i,{prop:"goodsName",label:"商品名称"}),l(i,{prop:"goodsCode",label:"款号"}),l(i,{prop:"goodsPrice",label:"吊牌价格（元）"})]),_:1},8,["data","onSelect","onSelectAll"])),[[_,o.tableLoading]]),x("div",F,[l(p,{background:"",layout:"total,prev,sizes, pager, next",total:o.goodsTotal,"page-size":o.goodsForm.pageInfo.pageSize,"current-page":o.goodsForm.pageInfo.pageNum,onSizeChange:d.handleGoodsSizeChange,onCurrentChange:d.handleGoodsPageChange,"page-sizes":[5,10]},null,8,["total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1},8,["data"])}const H=G(D,[["render",k],["__scopeId","data-v-af93c860"]]);export{H as default};
