import{D as M}from"./index.682e9437.js";import{_ as D,d as N}from"./index.d703cb5a.js";import{c as S}from"./index.3994fdff.js";import{k as g,b as A,n as h,o as i,m as d,G as b,H as w,K as C,y as B,z as m,J as z,P as E,c as H,w as L,a as V}from"./elementPlus.921bee1b.js";const q={class:"waterfall-card"},T=["src"],$={class:"title"},j={__name:"index",props:{data:{type:Array,default:()=>[]},col:{type:Number,default:2},gaps:{type:Array,default:()=>["0px","0px"]},firstPageCount:{type:Number,default:10},animation:{type:String,default:"hapi"},rootMargin:{type:String,default:"0px 0px 400px 0px"}},setup(c){const t=c;let s,n=0,o=[],a=0;const f=g([]);(()=>{for(let e=0;e<t.col;e++)f.value[e]=[]})(),A(()=>t.data,e=>{o=[...o,...e],v()});function v(){k(),P(),++a<t.firstPageCount?h(()=>{v()}):h(()=>{I()})}const x=g(null);function k(){if(a<t.firstPageCount){n=a%t.col;return}const e=x.value.map(u=>u.offsetHeight),r=Math.min(...e);n=e.indexOf(r)}function I(){const e=x.value[n].querySelectorAll(".waterfall-img"),r=e[e.length-1];s.observe(r)}function P(){const e=o.shift();f.value[n].push(e)}function O(){(S()?Promise.resolve():N(()=>import("./intersection-observer.ec739b88.js"),[])).then(()=>{s=new IntersectionObserver(r=>{for(const u of r){const{target:l,isIntersecting:p}=u;if(p){const _=()=>{o.length&&v(),s.unobserve(l)};l.complete?_():l.onload=l.onerror=_}}},{rootMargin:t.rootMargin})})}return O(),(e,r)=>(i(),d("div",{class:"waterfall-wrapper",style:C({"column-gap":c.gaps[1]})},[(i(!0),d(b,null,w(f.value,(u,l)=>(i(),d("div",{class:"col-wrapper",ref_for:!0,ref_key:"cols",ref:x,key:l,style:C({"row-gap":c.gaps[0]})},[(i(!0),d(b,null,w(u,(p,_)=>(i(),d("div",{class:B(["row-wrapper",[c.animation]]),key:_},[m("div",q,[m("img",{class:"waterfall-img",src:p.img},null,8,T),m("p",$,z(p.value),1)])],2))),128))],4))),128))],4))}},F=D(j,[["__scopeId","data-v-b8456476"]]);const G={class:"masonry flex-box flex-h-center"},J={__name:"index",setup(c){const t=g({title:"\u7011\u5E03\u6D41",url:""}),s=g([]),n=E();async function o(){let a=await n.proxy.req({url:"/masonry/list"});a.result&&a.result.list&&(s.value=a.result.list)}return o(),(a,f)=>{const y=M;return i(),H(y,{data:t.value},{default:L(()=>[m("div",G,[V(F,{data:s.value,gaps:["10px","10px"]},null,8,["data"])])]),_:1},8,["data"])}}},U=D(J,[["__scopeId","data-v-d9b55fca"]]);export{U as default};
