import{D as M}from"./index.db8ee49c.js";import{_ as D,d as N}from"./index.7d3a97c8.js";import{c as S}from"./index.4627d5e4.js";import{k as g,b as A,o as i,m as d,F as h,G as b,J as w,y as B,D as m,I as E,n as C,O as L,c as V,w as q,a as z}from"./elementPlus.b99cfd50.js";const F={class:"waterfall-card"},H=["src"],T={class:"title"},$={__name:"index",props:{data:{type:Array,default:()=>[]},col:{type:Number,default:2},gaps:{type:Array,default:()=>["0px","0px"]},firstPageCount:{type:Number,default:10},animation:{type:String,default:"hapi"},rootMargin:{type:String,default:"0px 0px 400px 0px"}},setup(c){const t=c;let s,n=0,o=[],a=0;const f=g([]);(()=>{for(let e=0;e<t.col;e++)f.value[e]=[]})(),A(()=>t.data,e=>{o=[...o,...e],v()});function v(){I(),P(),++a<t.firstPageCount?C(()=>{v()}):C(()=>{k()})}const x=g(null);function I(){if(a<t.firstPageCount){n=a%t.col;return}const e=x.value.map(u=>u.offsetHeight),r=Math.min(...e);n=e.indexOf(r)}function k(){const e=x.value[n].querySelectorAll(".waterfall-img"),r=e[e.length-1];s.observe(r)}function P(){const e=o.shift();f.value[n].push(e)}function O(){(S()?Promise.resolve():N(()=>import("./intersection-observer.ec739b88.js"),[])).then(()=>{s=new IntersectionObserver(r=>{for(const u of r){const{target:l,isIntersecting:p}=u;if(p){const _=()=>{o.length&&v(),s.unobserve(l)};l.complete?_():l.onload=l.onerror=_}}},{rootMargin:t.rootMargin})})}return O(),(e,r)=>(i(),d("div",{class:"waterfall-wrapper",style:w({"column-gap":c.gaps[1]})},[(i(!0),d(h,null,b(f.value,(u,l)=>(i(),d("div",{class:"col-wrapper",ref_for:!0,ref_key:"cols",ref:x,key:l,style:w({"row-gap":c.gaps[0]})},[(i(!0),d(h,null,b(u,(p,_)=>(i(),d("div",{class:B(["row-wrapper",[c.animation]]),key:_},[m("div",F,[m("img",{class:"waterfall-img",src:p.img},null,8,H),m("p",T,E(p.value),1)])],2))),128))],4))),128))],4))}},j=D($,[["__scopeId","data-v-b8456476"]]);const G={class:"masonry flex-box flex-h-center"},J={__name:"index",setup(c){const t=g({title:"\u7011\u5E03\u6D41",url:""}),s=g([]),n=L();async function o(){let a=await n.proxy.req({url:"/masonry/list"});a.result&&a.result.list&&(s.value=a.result.list)}return o(),(a,f)=>{const y=M;return i(),V(y,{data:t.value},{default:q(()=>[m("div",G,[z(j,{data:s.value,gaps:["10px","10px"]},null,8,["data"])])]),_:1},8,["data"])}}},U=D(J,[["__scopeId","data-v-d9b55fca"]]);export{U as default};
