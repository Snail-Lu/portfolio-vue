import{j as D,l as W,q as le,v as G,N as d,u as P,at as ae,a5 as $,aI as Y,o as T,b as M,w as Q,a2 as oe,a3 as re,e as A,n as C,A as h,B as O,T as se,C as X,I as J,c as Z,a as j,F as ne,k as ie,x as H,b1 as I,Q as F,a$ as ce,R as U,E as ue,am as ve,S as de,au as fe,z as me,d as pe,h as he,y as be,D as ye,aa as ge}from"./index.92191706.js";import{t as we}from"./error2.0bf5905b.js";const ee=Symbol("scrollbarContextKey"),E=4,Se={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},_e=({move:a,size:t,bar:n})=>({[n.size]:t,transform:`translate${n.axis}(${a}%)`}),ze=D({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ke=W({__name:"thumb",props:ze,setup(a){const t=a,n="Thumb",l=le(ee),i=G("scrollbar");l||we(n,"can not inject scrollbar context");const u=d(),o=d(),v=d({}),s=d(!1);let b=!1,y=!1,g=J?document.onselectstart:null;const r=P(()=>Se[t.vertical?"vertical":"horizontal"]),k=P(()=>_e({size:t.size,move:t.move,bar:r.value})),w=P(()=>u.value[r.value.offset]**2/l.wrapElement[r.value.scrollSize]/t.ratio/o.value[r.value.offset]),N=c=>{var f;if(c.stopPropagation(),c.ctrlKey||[1,2].includes(c.button))return;(f=window.getSelection())==null||f.removeAllRanges(),R(c);const m=c.currentTarget;!m||(v.value[r.value.axis]=m[r.value.offset]-(c[r.value.client]-m.getBoundingClientRect()[r.value.direction]))},B=c=>{if(!o.value||!u.value||!l.wrapElement)return;const f=Math.abs(c.target.getBoundingClientRect()[r.value.direction]-c[r.value.client]),m=o.value[r.value.offset]/2,_=(f-m)*100*w.value/u.value[r.value.offset];l.wrapElement[r.value.scroll]=_*l.wrapElement[r.value.scrollSize]/100},R=c=>{c.stopImmediatePropagation(),b=!0,document.addEventListener("mousemove",L),document.addEventListener("mouseup",x),g=document.onselectstart,document.onselectstart=()=>!1},L=c=>{if(!u.value||!o.value||b===!1)return;const f=v.value[r.value.axis];if(!f)return;const m=(u.value.getBoundingClientRect()[r.value.direction]-c[r.value.client])*-1,_=o.value[r.value.offset]-f,te=(m-_)*100*w.value/u.value[r.value.offset];l.wrapElement[r.value.scroll]=te*l.wrapElement[r.value.scrollSize]/100},x=()=>{b=!1,v.value[r.value.axis]=0,document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",x),p(),y&&(s.value=!1)},S=()=>{y=!1,s.value=!!t.size},e=()=>{y=!0,s.value=b};ae(()=>{p(),document.removeEventListener("mouseup",x)});const p=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return $(Y(l,"scrollbarElement"),"mousemove",S),$(Y(l,"scrollbarElement"),"mouseleave",e),(c,f)=>(T(),M(se,{name:h(i).b("fade"),persisted:""},{default:Q(()=>[oe(A("div",{ref_key:"instance",ref:u,class:C([h(i).e("bar"),h(i).is(h(r).key)]),onMousedown:B},[A("div",{ref_key:"thumb",ref:o,class:C(h(i).e("thumb")),style:O(h(k)),onMousedown:N},null,38)],34),[[re,c.always||s.value]])]),_:1},8,["name"]))}});var V=X(ke,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Ee=D({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),xe=W({__name:"bar",props:Ee,setup(a,{expose:t}){const n=a,l=d(0),i=d(0);return t({handleScroll:o=>{if(o){const v=o.offsetHeight-E,s=o.offsetWidth-E;i.value=o.scrollTop*100/v*n.ratioY,l.value=o.scrollLeft*100/s*n.ratioX}}}),(o,v)=>(T(),Z(ne,null,[j(V,{move:l.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),j(V,{move:i.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var He=X(xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Te=D({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:ie([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ce={scroll:({scrollTop:a,scrollLeft:t})=>[a,t].every(H)},Be={name:"ElScrollbar"},Le=W({...Be,props:Te,emits:Ce,setup(a,{expose:t,emit:n}){const l=a,i=G("scrollbar");let u,o;const v=d(),s=d(),b=d(),y=d("0"),g=d("0"),r=d(),k=d(1),w=d(1),N=P(()=>{const e={};return l.height&&(e.height=I(l.height)),l.maxHeight&&(e.maxHeight=I(l.maxHeight)),[l.wrapStyle,e]}),B=()=>{var e;s.value&&((e=r.value)==null||e.handleScroll(s.value),n("scroll",{scrollTop:s.value.scrollTop,scrollLeft:s.value.scrollLeft}))};function R(e,p){be(e)?s.value.scrollTo(e):H(e)&&H(p)&&s.value.scrollTo(e,p)}const L=e=>{!H(e)||(s.value.scrollTop=e)},x=e=>{!H(e)||(s.value.scrollLeft=e)},S=()=>{if(!s.value)return;const e=s.value.offsetHeight-E,p=s.value.offsetWidth-E,c=e**2/s.value.scrollHeight,f=p**2/s.value.scrollWidth,m=Math.max(c,l.minSize),_=Math.max(f,l.minSize);k.value=c/(e-c)/(m/(e-m)),w.value=f/(p-f)/(_/(p-_)),g.value=m+E<e?`${m}px`:"",y.value=_+E<p?`${_}px`:""};return F(()=>l.noresize,e=>{e?(u==null||u(),o==null||o()):({stop:u}=ce(b,S),o=$("resize",S))},{immediate:!0}),F(()=>[l.maxHeight,l.height],()=>{l.native||U(()=>{var e;S(),s.value&&((e=r.value)==null||e.handleScroll(s.value))})}),ue(ee,ve({scrollbarElement:v,wrapElement:s})),de(()=>{l.native||U(()=>S())}),fe(()=>S()),t({wrap$:s,update:S,scrollTo:R,setScrollTop:L,setScrollLeft:x,handleScroll:B}),(e,p)=>(T(),Z("div",{ref_key:"scrollbar$",ref:v,class:C(h(i).b())},[A("div",{ref_key:"wrap$",ref:s,class:C([e.wrapClass,h(i).e("wrap"),{[h(i).em("wrap","hidden-default")]:!e.native}]),style:O(h(N)),onScroll:B},[(T(),M(pe(e.tag),{ref_key:"resize$",ref:b,class:C([h(i).e("view"),e.viewClass]),style:O(e.viewStyle)},{default:Q(()=>[me(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?he("v-if",!0):(T(),M(He,{key:0,ref_key:"barRef",ref:r,height:g.value,width:y.value,always:e.always,"ratio-x":w.value,"ratio-y":k.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Pe=X(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const $e=ye(Pe),z=new Map;let K;J&&(document.addEventListener("mousedown",a=>K=a),document.addEventListener("mouseup",a=>{for(const t of z.values())for(const{documentHandler:n}of t)n(a,K)}));function q(a,t){let n=[];return Array.isArray(t.arg)?n=t.arg:ge(t.arg)&&n.push(t.arg),function(l,i){const u=t.instance.popperRef,o=l.target,v=i==null?void 0:i.target,s=!t||!t.instance,b=!o||!v,y=a.contains(o)||a.contains(v),g=a===o,r=n.length&&n.some(w=>w==null?void 0:w.contains(o))||n.length&&n.includes(v),k=u&&(u.contains(o)||u.contains(v));s||b||y||g||r||k||t.value(l,i)}}const Me={beforeMount(a,t){z.has(a)||z.set(a,[]),z.get(a).push({documentHandler:q(a,t),bindingFn:t.value})},updated(a,t){z.has(a)||z.set(a,[]);const n=z.get(a),l=n.findIndex(u=>u.bindingFn===t.oldValue),i={documentHandler:q(a,t),bindingFn:t.value};l>=0?n.splice(l,1,i):n.push(i)},unmounted(a){z.delete(a)}};export{Me as C,$e as E};
