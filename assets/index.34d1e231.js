import{_ as f}from"./index.331b03e4.js";import{D as r}from"./index.f389f9cc.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                        *//* empty css                    *//* empty css                  */import{Y as G,a1 as I,a2 as S,a3 as C,a4 as b,o as i,c as g,w as c,a as l,H as x,t as N,I as P,G as A,A as y,C as z}from"./elementPlus.3a3f6abe.js";const T={components:{Demo:r},name:"TableSelect",data(){return{demoInfo:{title:"\u8868\u683C\u5206\u9875\u591A\u9009",url:"https://snail-lu.vercel.app/2021-11-11-element-ui-zhong-el-table-fan-ye-duo-xuan-shi-xian.html"},tableData:[],goodsTotal:0,tableLoading:!1,selectedGoodsIds:[],selectedGoodsIdsOther:[],selectedGoodsIdsAll:[],showSelectedGoods:!1,goodsForm:{pageInfo:{pageNum:1,pageSize:5}}}},created(){this.onSearchGoods()},methods:{handleGoodsPageChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageNum=e,this.onSearchGoods()},handleGoodsSizeChange(e){this.getAllSelectedGoodsId(),this.goodsForm.pageInfo.pageSize=e,this.onSearchGoods()},onSearchGoods(){this.tableLoading=!0,this.queryGoods(this.goodsForm).then(e=>{this.tableData=e.list,this.toggleSelection(),this.goodsTotal=e.total,this.tableLoading=!1},()=>{this.tableLoading=!1})},toggleSelection(){const e=[],t=this.selectedGoodsIdsAll.slice();this.$nextTick(()=>{this.tableData.forEach(s=>{if(this.selectedGoodsIdsAll.includes(s.id)){this.$refs.multipleTable.toggleRowSelection(s,!0),e.push(s.id);const a=t.indexOf(s.id);t.splice(a,1)}}),this.selectedGoodsIds=e,this.selectedGoodsIdsOther=t})},handleSelectionChange(e){this.selectedGoodsIds=e.map(t=>t.id)},getAllSelectedGoodsId(){const{selectedGoodsIds:e,selectedGoodsIdsOther:t}=this;this.selectedGoodsIdsAll=[...t,...e]},onPrint(){this.showSelectedGoods=!0,this.getAllSelectedGoodsId()},queryGoods(e){const{pageInfo:t}=e,{pageNum:s,pageSize:a}=t,o=[{id:1,goodsName:"\u6D4B\u8BD5\u5546\u54C11",goodsCode:"000001",goodsPrice:101},{id:2,goodsName:"\u6D4B\u8BD5\u5546\u54C12",goodsCode:"000002",goodsPrice:102},{id:3,goodsName:"\u6D4B\u8BD5\u5546\u54C13",goodsCode:"000003",goodsPrice:103},{id:4,goodsName:"\u6D4B\u8BD5\u5546\u54C14",goodsCode:"000004",goodsPrice:104},{id:5,goodsName:"\u6D4B\u8BD5\u5546\u54C15",goodsCode:"000005",goodsPrice:105},{id:6,goodsName:"\u6D4B\u8BD5\u5546\u54C16",goodsCode:"000006",goodsPrice:106},{id:7,goodsName:"\u6D4B\u8BD5\u5546\u54C17",goodsCode:"000007",goodsPrice:107},{id:8,goodsName:"\u6D4B\u8BD5\u5546\u54C18",goodsCode:"000008",goodsPrice:108},{id:9,goodsName:"\u6D4B\u8BD5\u5546\u54C19",goodsCode:"000009",goodsPrice:109},{id:10,goodsName:"\u6D4B\u8BD5\u5546\u54C110",goodsCode:"0000010",goodsPrice:110}];return new Promise(d=>{setTimeout(()=>{d({list:o.slice((s-1)*a,s*a),total:o.length})},1e3)})}}},D={key:0},k={class:"flex-box flex-h-end"};function v(e,t,s,a,o,d){const h=G,n=I,p=S,m=C,_=r,u=b;return i(),g(_,{data:o.demoInfo},{default:c(()=>[l(h,{onClick:d.onPrint,type:"primary",size:"mini",style:{"margin-bottom":"20px"}},{default:c(()=>[x("\u6253\u5370\u6240\u6709\u5DF2\u9009\u6570\u636EID")]),_:1},8,["onClick"]),o.showSelectedGoods?(i(),N("span",D,P(o.selectedGoodsIdsAll.length?o.selectedGoodsIdsAll.join(" "):""),1)):A("",!0),y((i(),g(p,{ref:"multipleTable",data:o.tableData,border:"",height:"450","header-cell-style":{background:"#F5F7FA",color:"#606266",textAlign:"center"},"cell-style":{textAlign:"center"},onSelect:d.handleSelectionChange,onSelectAll:d.handleSelectionChange},{default:c(()=>[l(n,{type:"selection"}),l(n,{prop:"id",label:"ID"}),l(n,{prop:"goodsName",label:"\u5546\u54C1\u540D\u79F0"}),l(n,{prop:"goodsCode",label:"\u6B3E\u53F7"}),l(n,{prop:"goodsPrice",label:"\u540A\u724C\u4EF7\u683C\uFF08\u5143\uFF09"})]),_:1},8,["data","onSelect","onSelectAll"])),[[u,o.tableLoading]]),z("div",k,[l(m,{background:"",layout:"total,prev,sizes, pager, next",total:o.goodsTotal,"page-size":o.goodsForm.pageInfo.pageSize,"current-page":o.goodsForm.pageInfo.pageNum,onSizeChange:d.handleGoodsSizeChange,onCurrentChange:d.handleGoodsPageChange,"page-sizes":[5,10]},null,8,["total","page-size","current-page","onSizeChange","onCurrentChange"])])]),_:1},8,["data"])}const R=f(T,[["render",v],["__scopeId","data-v-af93c860"]]);export{R as default};
