import{_ as k}from"./index.9d8d7e21.js";/* empty css                     *//* empty css                    *//* empty css                */import{o as u,m as C,z as B,P as O,f as T,b as D,k as h,a6 as N,a9 as j,ag as A,ah as P,_ as z,S as G,ai as H,Z as S,ab as $,c as f,w as o,a as n,O as w,I as v}from"./elementPlus.8845be7b.js";/* empty css                        *//* empty css                  *//* empty css                       *//* empty css                 *//* empty css                 */import{g as M}from"./date.a32f5167.js";import{D as Z}from"./index.8b7661c8.js";const q={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},J=B("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),K=[J];function Q(l,s){return u(),C("svg",q,K)}const W={name:"ep-plus",render:Q};function X(l,s,i="a"){return new Promise(e=>{const t=new Image;t.crossOrigin="*",t.onload=function(){const a=y(t,s),c=I(a,i);e(c)},t.src=l})}function y(l,s="\u6211\u662F\u4E00\u6BB5\u6C34\u5370"){const{width:i,height:e}=l,t=document.createElement("canvas");t.width=i,t.height=e;const a=t.getContext("2d");a.drawImage(l,0,0,i,e),a.fillStyle="red",a.font="50px sans-serif",a.fillText(s,100,100);const U=`image/${l.src.substring(l.src.lastIndexOf(".")+1).toLowerCase()}`;return t.toDataURL(U)}function I(l,s){let i=l.split(","),e=i[0].match(/:(.*?);/)[1],t=atob(i[1]),a=t.length,c=new Uint8Array(a);for(;a--;)c[a]=t.charCodeAt(a);return new File([c],s,{type:e})}function Y(l){return new Promise((s,i)=>{let e=new FileReader;e.addEventListener("load",()=>{let t=new Image;t.src=e.result,t.addEventListener("load",()=>s(t))}),e.readAsDataURL(l)})}const ee={__name:"index",setup(l){const s={title:"\u56FE\u7247\u6C34\u5370",url:""},i=O(),e=T({text:M(),imgUrl:"https://t7.baidu.com/it/u=2168645659,3174029352&fm=193&f=GIF",transformedImgUrl:"",type:1});D(()=>e.type,()=>{e.transformedImgUrl=""});const t=h([]),a=h("");async function c(m){console.log(m,"upload file"),a.value=URL.createObjectURL(m.raw);let r=await Y(m.raw);const g=y(r,e.text),d=I(g,"a"),_=URL.createObjectURL(d);e.transformedImgUrl=_,t.value=[_]}async function U(){if(e.imgUrl){const m=await X(e.imgUrl,e.text),r=URL.createObjectURL(m);e.transformedImgUrl=r,t.value=[r]}else i.proxy.$message.error("\u8BF7\u8F93\u5165\u7F51\u7EDC\u56FE\u7247\u5730\u5740")}return(m,r)=>{const g=N,d=j,_=A,b=P,L=z,x=G,R=W,V=H,E=S,F=$;return u(),f(Z,{data:s},{default:o(()=>[n(F,{model:e},{default:o(()=>[n(d,{label:"\u6C34\u5370\u5185\u5BB9\uFF1A"},{default:o(()=>[n(g,{modelValue:e.text,"onUpdate:modelValue":r[0]||(r[0]=p=>e.text=p)},null,8,["modelValue"])]),_:1}),n(d,{label:"\u56FE\u7247\u7C7B\u578B\uFF1A"},{default:o(()=>[n(b,{modelValue:e.type,"onUpdate:modelValue":r[1]||(r[1]=p=>e.type=p)},{default:o(()=>[n(_,{label:1},{default:o(()=>[w("\u7F51\u7EDC\u56FE\u7247")]),_:1}),n(_,{label:2},{default:o(()=>[w("\u672C\u5730\u56FE\u7247")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e.type==1?(u(),f(d,{key:0,label:"\u56FE\u7247\u5730\u5740\uFF1A"},{default:o(()=>[n(g,{modelValue:e.imgUrl,"onUpdate:modelValue":r[2]||(r[2]=p=>e.imgUrl=p)},{append:o(()=>[n(L,{onClick:U},{default:o(()=>[w("\u6DFB\u52A0\u6C34\u5370")]),_:1})]),_:1},8,["modelValue"])]),_:1})):v("",!0),e.type==2?(u(),f(d,{key:1,label:"\u672C\u5730\u56FE\u7247\uFF1A"},{default:o(()=>[n(E,{class:"avatar-uploader",action:"#","auto-upload":!1,"on-change":c,"show-file-list":!1},{default:o(()=>[a.value?(u(),f(x,{key:0,src:a.value,class:"avatar",fit:"contain"},null,8,["src"])):(u(),f(V,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[n(R)]),_:1}))]),_:1})]),_:1})):v("",!0),n(d,{label:"\u6C34\u5370\u6548\u679C\uFF1A"},{default:o(()=>[n(x,{style:{width:"150px",height:"150px"},src:e.transformedImgUrl,"preview-src-list":t.value,fit:"contain"},null,8,["src","preview-src-list"])]),_:1})]),_:1},8,["model"])]),_:1})}}},_e=k(ee,[["__scopeId","data-v-69552285"]]);export{_e as default};
