import{D as Y}from"./index.7ea2114b.js";import{_ as j,e as z}from"./index.3ed8dabc.js";import{h as V,k as m,z as R,o as D,m as T,D as e,J as B,u as S,y as I,b as U,c as X,w as W,G,F as J,I as N,N as M,a as E,H as K,K as q,L as A}from"./elementPlus.e195b922.js";const Q="/portfolio/assets/music_cover.112cf208.jpg",Z="/portfolio/assets/\u6709\u4F55\u4E0D\u53EF.2d76fd79.mp3";const ee={__name:"Slider",props:{modelValue:Number,min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},vertical:{type:Boolean,default:!1}},emits:["update:modelValue","change","drag"],setup(x,{emit:y}){const t=x,b=V(()=>t.vertical?{height:a.value}:{width:a.value}),u=V(()=>t.vertical?{bottom:a.value}:{left:a.value}),n=m(null),r=m(null),a=V(()=>(t.modelValue*100/(t.max-t.min)).toFixed(2)+"%"),_=V(()=>{const s=[t.min,t.max,t.step].map(d=>{const h=`${d}`.split(".")[1];return h?h.length:0});return Math.max.apply(null,s)}),o={};let c=0;R(()=>{const{offsetWidth:s,offsetHeight:d}=n.value;c=t.vertical?d:s});const i=s=>{s.preventDefault(),o.start=t.vertical?s.clientY:s.clientX,o.startPosition=t.modelValue/(t.max-t.min)*c,window.addEventListener("mousemove",C),window.addEventListener("mouseup",g),y("drag")},g=()=>{window.removeEventListener("mousemove",C),window.removeEventListener("mouseup",g),y("change",t.modelValue)},C=s=>{let d=s||window.event,h=t.vertical?o.start-d.clientY:d.clientX-o.start,w=o.startPosition+h;L(w)},f=m(null),F=s=>{let d=t.vertical?f.value.getBoundingClientRect().bottom-s.clientY:s.clientX-f.value.getBoundingClientRect().left;const h=L(d);y("change",h)},L=s=>{s<0&&(s=0),s>=c&&(s=c);const d=(t.max-t.min)/t.step;let w=Math.round(s/c*d)*t.step+t.min;return w=Number.parseFloat(w.toFixed(_.value)),y("update:modelValue",w),w};return(s,d)=>(D(),T("div",{class:I([x.vertical?"slider-vertical":"slider"]),ref_key:"slider",ref:f},[e("div",{class:"slider-runway",onClick:F,ref_key:"runway",ref:n},[e("div",{class:"slider-bar",style:B(S(b))},null,4),e("div",{class:"slider-dot",style:B(S(u)),onMousedown:i,ref_key:"dot",ref:r},null,36)],512)],2))}},P=j(ee,[["__scopeId","data-v-a46cb1b5"]]);function te(x,y){const t=b=>{const u={ti:"",ar:"",al:"",by:"",offset:0,ms:[]};if(b.length==0)return;const n=b.split(`
`);for(let r in n){n[r]=n[r].replace(/(^\s*)|(\s*$)/g,"");let _=n[r].substring(n[r].indexOf("[")+1,n[r].indexOf("]")).split(":");if(isNaN(parseInt(_[0])))for(let o in u)o!="ms"&&o==_[0].toLowerCase()&&(u[o]=_[1]);else{const o=n[r].match(/\[(\d+:.+?)\]/g);let c=0;for(let g in o)c+=o[g].length;let i=n[r].substring(c);for(let g in o){let f=o[g].substring(1,o[g].length-1).split(":");i&&u.ms.push({t:(parseFloat(f[0])*60+parseFloat(f[1])).toFixed(3),c:i})}}}return u.ms.sort(function(r,a){return r.t-a.t}),u};return new Promise((b,u)=>{z.get(y).then(({data:n})=>{let r=t(n);b(r)}).catch(n=>{u(n)})})}const k=x=>(q("data-v-5b67e29e"),x=x(),A(),x),se={class:"music-container"},ne=k(()=>e("div",{class:"header flex-box flex-v-center"},[e("span",{class:"logo iconfont icon-music"}),M(" \u97F3\u4E50\u64AD\u653E\u5668 ")],-1)),oe={class:"content"},le={class:"disc flex-box flex-v-center flex-h-center"},ae={class:"disc-outer flex-box flex-v-center flex-h-center"},re={class:"disc-inner"},ie={class:"footer"},ce={class:"music-info"},ue={class:"song-name"},de=k(()=>e("span",null,"---",-1)),ve={class:"song-singer"},me={class:"music-duration"},pe={class:"progress"},_e={class:"controls flex-box flex-h-center flex-v-center"},fe=k(()=>e("span",{class:"prev iconfont icon-prev",title:"\u4E0A\u4E00\u9996"},null,-1)),he=["title"],ge=k(()=>e("span",{class:"next iconfont icon-next",title:"\u4E0B\u4E00\u9996"},null,-1)),xe={class:"volume"},ye={key:0,class:"volume-controls"},be=k(()=>e("source",{src:Z},null,-1)),we=k(()=>e("code",null,"audio",-1)),Ve={__name:"index",setup(x){const y={title:"\u97F3\u4E50\u64AD\u653E\u5668",url:""},t=m(0),b=V(()=>h(t.value)),u=m(0),n=m(0),r=V(()=>h(n.value)),a=m({});te("","../\u6709\u4F55\u4E0D\u53EF.lrc").then(l=>{a.value=l});const _=V(()=>{let l=Math.floor(u.value);if(a.value.ms&&l>0)if(_.value<a.value.ms.length-2){let p=a.value.ms.findIndex(v=>l<v.t);return p>0?p-1:0}else return a.value.ms.length-1;else return 0}),o=V(()=>{if(_.value*30>=150)return-(_.value*30-150)+"px"}),c=m(!0),i=m(null),g=()=>{i.value.paused?i.value.play():i.value.pause(),c.value=i.value.paused},C=m(.2);U(C,l=>{i.value&&(i.value.volume=l)},{immediate:!0});const f=m(!1),F=l=>{f.value=!0},L=l=>{i.value.currentTime=l,f.value=!1},s=m(!1),d=()=>{s.value=!s.value},h=l=>{let p=Math.floor(l/60),v=Math.floor(l%60);return p=String(p).padStart(2,"0"),v=String(v).padStart(2,"0"),`${p}:${v}`},w=()=>{t.value=Math.round(i.value.duration)},H=()=>{if(f.value)return;let l=Math.round(i.value.currentTime);n.value=l,u.value=l},O=()=>{c.value=!0,u.value=0};return(l,p)=>(D(),X(Y,{data:y},{default:W(()=>[e("div",se,[ne,e("div",oe,[e("div",le,[e("div",ae,[e("div",re,[e("img",{src:Q,class:I(["cover-img-rotate",c.value?"cover-img-rotate-paused":""]),alt:""},null,2)])])]),e("div",{class:"lyric",style:B({marginTop:S(o)})},[(D(!0),T(J,null,G(a.value.ms,(v,$)=>(D(),T("p",{class:I(["lyric-text",S(_)===$?"lyric-text-current":""]),key:v.t},N(v.c),3))),128))],4)]),e("div",ie,[e("div",ce,[e("div",null,[e("span",ue,N(a.value.ti),1),de,e("span",ve,N(a.value.ar),1)]),e("div",me,[e("span",null,N(S(r)),1),M("/"),e("span",null,N(S(b)),1)])]),e("div",pe,[E(P,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=v=>n.value=v),max:t.value,onChange:L,onDrag:F},null,8,["modelValue","max"])]),e("div",_e,[fe,e("span",{class:I(["switch iconfont",c.value?"icon-play":"icon-pause"]),onClick:g,title:c.value?"\u64AD\u653E":"\u6682\u505C"},null,10,he),ge,e("div",xe,[e("span",{class:"volume-icon iconfont icon-volume",onClick:d}),s.value?(D(),T("div",ye,[E(P,{modelValue:C.value,"onUpdate:modelValue":p[1]||(p[1]=v=>C.value=v),max:1,step:.1,vertical:""},null,8,["modelValue","step"])])):K("",!0)])])]),e("audio",{ref_key:"audio",ref:i,onCanplay:w,onTimeupdate:H,onEnded:O},[be,M(" Your browser does not support the"),we,M(" element. ")],544)])]),_:1}))}},Ne=j(Ve,[["__scopeId","data-v-5b67e29e"]]);export{Ne as default};
